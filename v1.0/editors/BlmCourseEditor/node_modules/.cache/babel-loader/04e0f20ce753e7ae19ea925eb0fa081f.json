{"ast":null,"code":"import i18next from \"i18next\";\nimport { ElementType } from \"editor-constants\";\nimport { getEvaluationChildren, hasProperties, hasTemplates } from \"utils\";\nimport { hasEmptyTemplate } from \"components/structures/panel/course-tree/utils\";\nimport * as constants from \"redux/constants\";\nimport { closeElementPropertiesPanel, closeElementTemplatesPanel, closeStructurePanel, getCourseProperties, getCourseStructure, getCourseStyle, getElementTemplates, getLanguages, getThemes, openDialog, openElementPropertiesPanel, openElementTemplatesPanel, openStructurePanel, selectTreeItem, setElementPropertiesTabIndex, getElementProperties } from \"redux/actions\";\nimport { GlTemplateBuilderStore } from \"template-builders\";\nexport const editorMiddleware = store => next => action => {\n  if (action) {\n    const isValid = doBeforeAction(store, action);\n\n    if (isValid) {\n      const result = next(action);\n      doAfterAction(store, action);\n      return result;\n    }\n  }\n};\n\nfunction doBeforeAction(store, action) {\n  const {\n    type,\n    payload\n  } = action;\n  const {\n    dispatch\n  } = store;\n\n  switch (type) {\n    case constants.SELECT_TREE_ITEM:\n      const {\n        item\n      } = payload;\n\n      if ((item === null || item === void 0 ? void 0 : item.type) === ElementType.Question) {\n        const {\n          parent\n        } = item;\n\n        if (parent && parent.type === ElementType.Chapter && parent.isEvaluation && parent.theme === null && getEvaluationChildren(parent).length === 0) {\n          const onOk = () => {\n            dispatch(openStructurePanel());\n            dispatch(selectTreeItem(parent));\n            dispatch(setElementPropertiesTabIndex(2));\n          };\n\n          dispatch(openDialog(i18next.t(\"alert.question_warning\"), i18next.t(\"alert.question_info\"), onOk, {\n            className: \"theme-warning-dialog\"\n          }));\n          return false;\n        }\n      }\n\n      break;\n  }\n\n  return true;\n}\n\nfunction doAfterAction(store, action) {\n  const {\n    type,\n    payload\n  } = action;\n  const {\n    getState,\n    dispatch\n  } = store;\n  const {\n    editor: {\n      core: {\n        element,\n        structurePanel\n      }\n    },\n    course: {\n      style: {\n        style\n      }\n    }\n  } = getState();\n\n  switch (type) {\n    case constants.INITIALIZE_COURSE_PROPERTIES:\n      const {\n        id\n      } = payload;\n      dispatch(getCourseProperties(id));\n      dispatch(getCourseStructure());\n      dispatch(getCourseStyle(id));\n      dispatch(getThemes(id));\n      dispatch(getLanguages());\n      break;\n\n    case constants.SELECT_TREE_ITEM:\n      const {\n        item\n      } = payload;\n\n      if (item) {\n        if (hasProperties(item)) {\n          dispatch(openElementPropertiesPanel(item));\n        } else if (hasTemplates(item)) {\n          dispatch(openElementTemplatesPanel(item));\n          dispatch(!structurePanel.isPinned || hasEmptyTemplate(item) ? closeStructurePanel() : openStructurePanel());\n        } else if (item.type === ElementType.PartPage && item.parent) {\n          dispatch(openElementTemplatesPanel(item.parent, item));\n\n          if (!structurePanel.isPinned) {\n            dispatch(closeStructurePanel());\n          }\n        }\n      } else {\n        dispatch(closeElementPropertiesPanel());\n        dispatch(closeElementTemplatesPanel());\n      }\n\n      break;\n\n    case constants.GET_COURSE_STYLE_SUCCESS:\n      if (style === null || style === void 0 ? void 0 : style.styles) {\n        GlTemplateBuilderStore.setStyles(style === null || style === void 0 ? void 0 : style.styles);\n      }\n\n      break;\n\n    case constants.DUPLICATE_ELEMENT_TEMPLATE_SUCCESS:\n    case constants.DELETE_ELEMENT_TEMPLATE_SUCCESS:\n    case constants.UPDATE_ELEMENT_TEMPLATES_SUCCESS:\n    case constants.POSITION_ELEMENT_TEMPLATE_SUCCESS:\n    case constants.UPDATE_ELEMENT_PROPERTIES_SUCCESS:\n      if (element && hasTemplates(element)) {\n        dispatch(getElementTemplates(element));\n        getElementProperties(element);\n      }\n\n      dispatch(getCourseStructure());\n      break;\n\n    case constants.UPDATE_COURSE_PROPERTIES_SUCCESS:\n    case constants.CREATE_ELEMENT_SUCCESS:\n    case constants.RENAME_ELEMENT_SUCCESS:\n    case constants.DELETE_ELEMENT_SUCCESS:\n    case constants.DUPLICATE_ELEMENT_SUCCESS:\n    case constants.UPDATE_ELEMENT_CONNECTION_SUCCESS:\n    case constants.UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS:\n    case constants.UPDATE_ELEMENT_SUMMARY_SUCCESS:\n    case constants.RESET_ELEMENT_TEMPLATE_SUCCESS:\n      dispatch(getCourseStructure());\n      break;\n\n    case constants.POSITION_ELEMENT_SUCCESS:\n      if (element && hasTemplates(element)) {\n        dispatch(getElementTemplates(element));\n      }\n\n      dispatch(getCourseStructure());\n      break;\n\n    case constants.GET_VIMEO_VIDEO_ERROR:\n      break;\n\n    default:\n      if (action.error === true) {\n        if (typeof payload.response === \"object\" && payload.response.error_no) {\n          const {\n            error_msg,\n            redirect_url\n          } = payload.response;\n\n          const onOk = () => {\n            if (redirect_url && redirect_url !== \"\") {\n              window.location.href = redirect_url;\n            }\n          };\n\n          dispatch(openDialog(i18next.t(\"alert.failed\"), error_msg, onOk));\n        } else if (payload.name === \"ApiError\") {\n          dispatch(openDialog(i18next.t(\"alert.failed\"), i18next.t(\"alert.api_failed\")));\n        } else {\n          dispatch(openDialog(i18next.t(\"alert.failed\"), i18next.t(\"alert.network_failed\")));\n        }\n      }\n\n      break;\n  }\n}","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/redux/middlewares/editor.ts"],"names":["i18next","ElementType","getEvaluationChildren","hasProperties","hasTemplates","hasEmptyTemplate","constants","closeElementPropertiesPanel","closeElementTemplatesPanel","closeStructurePanel","getCourseProperties","getCourseStructure","getCourseStyle","getElementTemplates","getLanguages","getThemes","openDialog","openElementPropertiesPanel","openElementTemplatesPanel","openStructurePanel","selectTreeItem","setElementPropertiesTabIndex","getElementProperties","GlTemplateBuilderStore","editorMiddleware","store","next","action","isValid","doBeforeAction","result","doAfterAction","type","payload","dispatch","SELECT_TREE_ITEM","item","Question","parent","Chapter","isEvaluation","theme","length","onOk","t","className","getState","editor","core","element","structurePanel","course","style","INITIALIZE_COURSE_PROPERTIES","id","isPinned","PartPage","GET_COURSE_STYLE_SUCCESS","styles","setStyles","DUPLICATE_ELEMENT_TEMPLATE_SUCCESS","DELETE_ELEMENT_TEMPLATE_SUCCESS","UPDATE_ELEMENT_TEMPLATES_SUCCESS","POSITION_ELEMENT_TEMPLATE_SUCCESS","UPDATE_ELEMENT_PROPERTIES_SUCCESS","UPDATE_COURSE_PROPERTIES_SUCCESS","CREATE_ELEMENT_SUCCESS","RENAME_ELEMENT_SUCCESS","DELETE_ELEMENT_SUCCESS","DUPLICATE_ELEMENT_SUCCESS","UPDATE_ELEMENT_CONNECTION_SUCCESS","UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS","UPDATE_ELEMENT_SUMMARY_SUCCESS","RESET_ELEMENT_TEMPLATE_SUCCESS","POSITION_ELEMENT_SUCCESS","GET_VIMEO_VIDEO_ERROR","error","response","error_no","error_msg","redirect_url","window","location","href","name"],"mappings":"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","sourcesContent":["import { AnyAction, Middleware } from \"redux\";\r\nimport i18next from \"i18next\";\r\n\r\nimport { ElementType } from \"editor-constants\";\r\nimport { getEvaluationChildren, hasProperties, hasTemplates } from \"utils\";\r\nimport { hasEmptyTemplate } from \"components/structures/panel/course-tree/utils\";\r\nimport { AppThunkDispatch, AppThunkStore, RootState } from \"redux/types\";\r\nimport * as constants from \"redux/constants\";\r\nimport {\r\n  closeElementPropertiesPanel,\r\n  closeElementTemplatesPanel,\r\n  closeStructurePanel,\r\n  getCourseProperties,\r\n  getCourseStructure,\r\n  getCourseStyle,\r\n  getElementTemplates,\r\n  getLanguages,\r\n  getThemes,\r\n  openDialog,\r\n  openElementPropertiesPanel,\r\n  openElementTemplatesPanel,\r\n  openStructurePanel,\r\n  selectTreeItem,\r\n  setElementPropertiesTabIndex,\r\n  getElementProperties,\r\n} from \"redux/actions\";\r\nimport { GlTemplateBuilderStore } from \"template-builders\";\r\n\r\nexport const editorMiddleware: Middleware<void, RootState, AppThunkDispatch> =\r\n  (store) => (next) => (action: AnyAction) => {\r\n    if (action) {\r\n      const isValid = doBeforeAction(store, action);\r\n\r\n      if (isValid) {\r\n        const result = next(action);\r\n\r\n        doAfterAction(store, action);\r\n\r\n        return result;\r\n      }\r\n    }\r\n  };\r\n\r\nfunction doBeforeAction(store: AppThunkStore, action: AnyAction) {\r\n  const { type, payload } = action;\r\n  const { dispatch } = store;\r\n\r\n  switch (type) {\r\n    case constants.SELECT_TREE_ITEM:\r\n      const { item } = payload as constants.SelectTreeItemAction[\"payload\"];\r\n\r\n      if (item?.type === ElementType.Question) {\r\n        const { parent } = item;\r\n\r\n        if (\r\n          parent &&\r\n          parent.type === ElementType.Chapter &&\r\n          parent.isEvaluation &&\r\n          parent.theme === null &&\r\n          getEvaluationChildren(parent).length === 0\r\n        ) {\r\n          const onOk = () => {\r\n            dispatch(openStructurePanel());\r\n            dispatch(selectTreeItem(parent));\r\n            dispatch(setElementPropertiesTabIndex(2));\r\n          };\r\n\r\n          dispatch(\r\n            openDialog(\r\n              i18next.t(\"alert.question_warning\"),\r\n              i18next.t(\"alert.question_info\"),\r\n              onOk,\r\n              { className: \"theme-warning-dialog\" }\r\n            )\r\n          );\r\n\r\n          return false;\r\n        }\r\n      }\r\n      break;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\nfunction doAfterAction(store: AppThunkStore, action: AnyAction) {\r\n  const { type, payload } = action;\r\n  const { getState, dispatch } = store;\r\n  const {\r\n    editor: {\r\n      core: { element, structurePanel },\r\n    },\r\n    course: {\r\n      style: { style },\r\n    },\r\n  } = getState();\r\n\r\n  switch (type) {\r\n    case constants.INITIALIZE_COURSE_PROPERTIES:\r\n      const { id } = payload as constants.InitCourseAction[\"payload\"];\r\n\r\n      dispatch(getCourseProperties(id));\r\n      dispatch(getCourseStructure());\r\n      dispatch(getCourseStyle(id));\r\n      dispatch(getThemes(id));\r\n      dispatch(getLanguages());\r\n      break;\r\n    case constants.SELECT_TREE_ITEM:\r\n      const { item } = payload as constants.SelectTreeItemAction[\"payload\"];\r\n\r\n      if (item) {\r\n        if (hasProperties(item)) {\r\n          dispatch(openElementPropertiesPanel(item));\r\n        } else if (hasTemplates(item)) {\r\n          dispatch(openElementTemplatesPanel(item));\r\n          dispatch(\r\n            !structurePanel.isPinned || hasEmptyTemplate(item)\r\n              ? closeStructurePanel()\r\n              : openStructurePanel()\r\n          );\r\n        } else if (item.type === ElementType.PartPage && item.parent) {\r\n          dispatch(openElementTemplatesPanel(item.parent, item));\r\n\r\n          if (!structurePanel.isPinned) {\r\n            dispatch(closeStructurePanel());\r\n          }\r\n        }\r\n      } else {\r\n        dispatch(closeElementPropertiesPanel());\r\n        dispatch(closeElementTemplatesPanel());\r\n      }\r\n      break;\r\n    case constants.GET_COURSE_STYLE_SUCCESS:\r\n      if (style?.styles) {\r\n        GlTemplateBuilderStore.setStyles(style?.styles);\r\n      }\r\n      break;\r\n    case constants.DUPLICATE_ELEMENT_TEMPLATE_SUCCESS:\r\n    case constants.DELETE_ELEMENT_TEMPLATE_SUCCESS:\r\n    case constants.UPDATE_ELEMENT_TEMPLATES_SUCCESS:\r\n    case constants.POSITION_ELEMENT_TEMPLATE_SUCCESS:\r\n    case constants.UPDATE_ELEMENT_PROPERTIES_SUCCESS:\r\n      if (element && hasTemplates(element)) {\r\n        dispatch(getElementTemplates(element));\r\n        getElementProperties(element);\r\n      }\r\n      dispatch(getCourseStructure());\r\n      break;\r\n    case constants.UPDATE_COURSE_PROPERTIES_SUCCESS:\r\n    case constants.CREATE_ELEMENT_SUCCESS:\r\n    case constants.RENAME_ELEMENT_SUCCESS:\r\n    case constants.DELETE_ELEMENT_SUCCESS:\r\n    case constants.DUPLICATE_ELEMENT_SUCCESS:\r\n    case constants.UPDATE_ELEMENT_CONNECTION_SUCCESS:\r\n    case constants.UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS:\r\n    case constants.UPDATE_ELEMENT_SUMMARY_SUCCESS:\r\n    case constants.RESET_ELEMENT_TEMPLATE_SUCCESS:\r\n      dispatch(getCourseStructure());\r\n      break;\r\n    case constants.POSITION_ELEMENT_SUCCESS:\r\n      if (element && hasTemplates(element)) {\r\n        dispatch(getElementTemplates(element));\r\n      }\r\n      dispatch(getCourseStructure());\r\n      break;\r\n    case constants.GET_VIMEO_VIDEO_ERROR:\r\n      break;\r\n    default:\r\n      if (action.error === true) {\r\n        if (typeof payload.response === \"object\" && payload.response.error_no) {\r\n          const { error_msg, redirect_url } = payload.response;\r\n          const onOk = () => {\r\n            if (redirect_url && redirect_url !== \"\") {\r\n              window.location.href = redirect_url;\r\n            }\r\n          };\r\n\r\n          dispatch(openDialog(i18next.t(\"alert.failed\"), error_msg, onOk));\r\n        } else if (payload.name === \"ApiError\") {\r\n          dispatch(openDialog(i18next.t(\"alert.failed\"), i18next.t(\"alert.api_failed\")));\r\n        } else {\r\n          dispatch(openDialog(i18next.t(\"alert.failed\"), i18next.t(\"alert.network_failed\")));\r\n        }\r\n      }\r\n      break;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}