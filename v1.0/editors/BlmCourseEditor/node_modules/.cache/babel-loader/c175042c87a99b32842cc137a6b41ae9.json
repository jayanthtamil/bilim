{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajesh\\\\Downloads\\\\bilim (2)\\\\bilim\\\\v1.0\\\\editors\\\\BlmCourseEditor\\\\src\\\\components\\\\template-editors\\\\core\\\\variant-editor\\\\BlmVariantEditor.tsx\";\nimport React, { Fragment, useLayoutEffect, useRef } from \"react\";\nimport { Popper, Backdrop } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { PanelCloseReasons } from \"editor-constants\";\nimport { isElementVisibleInFrame } from \"utils\";\nimport { createModifiersForIFrame } from \"../../utils\";\nimport { BlmTemplateVariants } from \"../../containers\";\nimport \"./styles.scss\";\nconst popperOptions = {\n  eventsEnabled: true\n};\nconst modifiers = createModifiersForIFrame(-18, 1);\n\nfunction BlmVariantEditor(props) {\n  const {\n    open,\n    anchorEle,\n    templateEle,\n    element,\n    template,\n    onPreview,\n    onMore,\n    onSave,\n    onClose,\n    openConfirmDialog\n  } = props;\n  const editorRef = useRef(null);\n  const {\n    t\n  } = useTranslation(); //BILIM-276: [react] option popup move when scroll and edit\n\n  useLayoutEffect(() => {\n    setTimeout(() => {\n      if (!isElementVisibleInFrame(anchorEle)) {\n        anchorEle.scrollIntoView();\n      }\n    });\n  });\n\n  const openSaveConfirmDialog = () => {\n    const options = {\n      className: \"template-editor-warning-dialog\",\n      okLabel: `${t(\"button.save\")}`,\n      cancelLabel: `${t(\"button.cancel\")}`\n    };\n    openConfirmDialog(`${t(\"alert.cancel_confirm\")}`, `${t(\"alert.save_changes\")}`, handleSave, handleCancel, options);\n  };\n\n  const handleSave = event => {\n    const editor = editorRef.current;\n\n    if (editor) {\n      editor.saveOnClose(event);\n    }\n  };\n\n  const handleCancel = event => {\n    const editor = editorRef.current;\n\n    if (editor) {\n      editor.revert();\n    }\n\n    handleClose(event, PanelCloseReasons.Cancel);\n  };\n\n  const handleBackdropClick = event => {\n    const editor = editorRef.current;\n\n    if (editor && editor.isEdited) {\n      openSaveConfirmDialog();\n    } else {\n      handleClose(event);\n    }\n  };\n\n  const handleClose = (event, reason = PanelCloseReasons.Close) => {\n    if (onClose) {\n      onClose(event, reason);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Popper, {\n    id: \"variant-popper\",\n    open: open,\n    anchorEl: open ? anchorEle : null,\n    placement: \"bottom-start\",\n    popperOptions: popperOptions,\n    modifiers: modifiers,\n    className: \"variant-editor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BlmTemplateVariants, {\n    ref: editorRef,\n    element: element,\n    template: template,\n    templateEle: templateEle,\n    onPreview: onPreview,\n    onMore: onMore,\n    onSave: onSave,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Backdrop, {\n    open: open,\n    className: \"variant-editor-backdrop\",\n    onClick: handleBackdropClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default BlmVariantEditor;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/components/template-editors/core/variant-editor/BlmVariantEditor.tsx"],"names":["React","Fragment","useLayoutEffect","useRef","Popper","Backdrop","useTranslation","PanelCloseReasons","isElementVisibleInFrame","createModifiersForIFrame","BlmTemplateVariants","popperOptions","eventsEnabled","modifiers","BlmVariantEditor","props","open","anchorEle","templateEle","element","template","onPreview","onMore","onSave","onClose","openConfirmDialog","editorRef","t","setTimeout","scrollIntoView","openSaveConfirmDialog","options","className","okLabel","cancelLabel","handleSave","handleCancel","event","editor","current","saveOnClose","revert","handleClose","Cancel","handleBackdropClick","isEdited","reason","Close"],"mappings":"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","sourcesContent":["import React, { Fragment, MouseEvent, useLayoutEffect, useRef } from \"react\";\r\nimport { Popper, Backdrop } from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  CourseElement,\r\n  CourseElementTemplate,\r\n  TemplateEditorComponent,\r\n  TemplatePanelOptions,\r\n} from \"types\";\r\nimport { PanelCloseReasons } from \"editor-constants\";\r\nimport { isElementVisibleInFrame } from \"utils\";\r\nimport { createModifiersForIFrame } from \"../../utils\";\r\nimport { BlmTemplateVariants } from \"../../containers\";\r\nimport { ContainerProps } from \"./variant-editor-container\";\r\nimport \"./styles.scss\";\r\n\r\nexport interface CompProps extends ContainerProps {\r\n  open: boolean;\r\n  anchorEle: HTMLElement;\r\n  templateEle: HTMLElement;\r\n  element: CourseElement;\r\n  template: CourseElementTemplate;\r\n  onPreview: (template: CourseElementTemplate) => void;\r\n  onMore: (options: TemplatePanelOptions) => void;\r\n  onSave: (template: CourseElementTemplate) => void;\r\n  onClose: (event: MouseEvent, reason: PanelCloseReasons) => void;\r\n}\r\n\r\nconst popperOptions = {\r\n  eventsEnabled: true,\r\n};\r\nconst modifiers = createModifiersForIFrame(-18, 1);\r\n\r\nfunction BlmVariantEditor(props: CompProps) {\r\n  const {\r\n    open,\r\n    anchorEle,\r\n    templateEle,\r\n    element,\r\n    template,\r\n    onPreview,\r\n    onMore,\r\n    onSave,\r\n    onClose,\r\n    openConfirmDialog,\r\n  } = props;\r\n  const editorRef = useRef<TemplateEditorComponent | null>(null);\r\n  const { t } = useTranslation();\r\n\r\n  //BILIM-276: [react] option popup move when scroll and edit\r\n  useLayoutEffect(() => {\r\n    setTimeout(() => {\r\n      if (!isElementVisibleInFrame(anchorEle)) {\r\n        anchorEle.scrollIntoView();\r\n      }\r\n    });\r\n  });\r\n\r\n  const openSaveConfirmDialog = () => {\r\n    const options = {\r\n      className: \"template-editor-warning-dialog\",\r\n      okLabel: `${t(\"button.save\")}`,\r\n      cancelLabel: `${t(\"button.cancel\")}`,\r\n    };\r\n\r\n    openConfirmDialog(\r\n      `${t(\"alert.cancel_confirm\")}`,\r\n      `${t(\"alert.save_changes\")}`,\r\n      handleSave,\r\n      handleCancel,\r\n      options\r\n    );\r\n  };\r\n\r\n  const handleSave = (event: MouseEvent) => {\r\n    const editor = editorRef.current;\r\n\r\n    if (editor) {\r\n      editor.saveOnClose(event);\r\n    }\r\n  };\r\n\r\n  const handleCancel = (event: MouseEvent) => {\r\n    const editor = editorRef.current;\r\n\r\n    if (editor) {\r\n      editor.revert();\r\n    }\r\n\r\n    handleClose(event, PanelCloseReasons.Cancel);\r\n  };\r\n\r\n  const handleBackdropClick = (event: MouseEvent) => {\r\n    const editor = editorRef.current;\r\n\r\n    if (editor && editor.isEdited) {\r\n      openSaveConfirmDialog();\r\n    } else {\r\n      handleClose(event);\r\n    }\r\n  };\r\n\r\n  const handleClose = (event: MouseEvent, reason = PanelCloseReasons.Close) => {\r\n    if (onClose) {\r\n      onClose(event, reason);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Popper\r\n        id=\"variant-popper\"\r\n        open={open}\r\n        anchorEl={open ? anchorEle : null}\r\n        placement=\"bottom-start\"\r\n        popperOptions={popperOptions}\r\n        modifiers={modifiers}\r\n        className=\"variant-editor\"\r\n      >\r\n        <BlmTemplateVariants\r\n          ref={editorRef}\r\n          element={element}\r\n          template={template}\r\n          templateEle={templateEle}\r\n          onPreview={onPreview}\r\n          onMore={onMore}\r\n          onSave={onSave}\r\n          onClose={handleClose}\r\n        />\r\n      </Popper>\r\n      <Backdrop open={open} className=\"variant-editor-backdrop\" onClick={handleBackdropClick} />\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default BlmVariantEditor;\r\n"]},"metadata":{},"sourceType":"module"}