{"ast":null,"code":"import { createHTMLElement, getMaxValue } from \"utils\";\nimport { getHTMLElement, getStyleElementRules, setStyleSheetHTML } from \"../../core\";\nimport { setMediaComponent, setRepeaterComponent, setTextComponent, setButtonComponent, setStyleSheetRules, setSoundComponent, getRepeaterElements, setRelativeStyles } from \"../component\";\nexport function setHotspotClass(template, attri, compRatio, imgRatio) {\n  const {\n    html\n  } = template;\n  const element = createHTMLElement(html);\n\n  if (element) {\n    if (compRatio < imgRatio) {\n      element.querySelector(attri).classList.add(\"horizontal\");\n      element.querySelector(attri).classList.remove(\"vertical\");\n    } else {\n      element.querySelector(attri).classList.add(\"vertical\");\n      element.querySelector(attri).classList.remove(\"horizontal\");\n    }\n\n    return element.outerHTML;\n  }\n}\n\nfunction arrayEquals(a, b) {\n  return Array.isArray(a) && Array.isArray(b) && a.length === b.length && a.every((val, index) => val === b[index]);\n}\n\nexport function checkPrev(templates, prevEle) {\n  var testarrat1 = [];\n  var testarrat2 = [];\n  templates === null || templates === void 0 ? void 0 : templates.map((temp, ind) => {\n    var html = createHTMLElement(temp.html);\n    var hotspot1 = html === null || html === void 0 ? void 0 : html.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\n    hotspot1 === null || hotspot1 === void 0 ? void 0 : hotspot1.forEach((val, i) => {\n      var _val$querySelector;\n\n      var imageVal = val === null || val === void 0 ? void 0 : (_val$querySelector = val.querySelector(\".imagewrapper\")) === null || _val$querySelector === void 0 ? void 0 : _val$querySelector.getElementsByTagName(\"img\")[0].src;\n      testarrat1.push(imageVal);\n    });\n  });\n  prevEle === null || prevEle === void 0 ? void 0 : prevEle.map((temp, ind) => {\n    var html = createHTMLElement(temp.html);\n    var hotspot21 = html === null || html === void 0 ? void 0 : html.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\n    hotspot21 === null || hotspot21 === void 0 ? void 0 : hotspot21.forEach((val, i) => {\n      var _val$querySelector2;\n\n      var imageVal = val === null || val === void 0 ? void 0 : (_val$querySelector2 = val.querySelector(\".imagewrapper\")) === null || _val$querySelector2 === void 0 ? void 0 : _val$querySelector2.getElementsByTagName(\"img\")[0].src;\n      testarrat2.push(imageVal);\n    });\n  });\n  return arrayEquals(testarrat1, testarrat2);\n}\nexport function CheckHotspotContainClass(templates) {\n  var x = true;\n  templates === null || templates === void 0 ? void 0 : templates.map((temp, ind) => {\n    var html = createHTMLElement(temp.html);\n\n    if (html === null || html === void 0 ? void 0 : html.classList) {\n      Array.from(html === null || html === void 0 ? void 0 : html.classList).find(cls => cls.startsWith(\"rt-etr-\"));\n      var hotspot = html === null || html === void 0 ? void 0 : html.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\n      hotspot === null || hotspot === void 0 ? void 0 : hotspot.forEach((val, i) => {\n        if (val.classList.contains(\"hotspot\") && val.classList.contains(\"contain\")) {\n          if (!(val.classList.contains(\"vertical\") || val.classList.contains(\"horizontal\"))) {\n            x = false;\n            return x;\n          }\n        } else if (val.classList.contains(\"hotspot\") && val.classList.contains(\"panandzoom_hotspot\")) {\n          if (val.classList.contains(\"vertical\") || val.classList.contains(\"horizontal\")) {\n            x = false;\n            return x;\n          }\n        }\n      });\n    }\n  });\n  return x;\n}\nexport function RemoveHotspotClass(template, attri) {\n  const {\n    html\n  } = template;\n  const element = createHTMLElement(html);\n\n  if (element) {\n    element.querySelector(attri).classList.remove(\"vertical\");\n    element.querySelector(attri).classList.remove(\"horizontal\");\n    return element.outerHTML;\n  }\n}\nexport function setContentTemplateHTML(template, content, duplicate) {\n  const {\n    html,\n    template: associated\n  } = template;\n  const element = createHTMLElement(html);\n  const {\n    texts,\n    medias,\n    buttons,\n    sounds,\n    repeater\n  } = content;\n\n  if (element) {\n    const maxId = getMaxValue([...texts, ...medias, ...buttons], \"id\");\n    const rules = getStyleElementRules(element);\n    setTextComponentsHTML(element, texts);\n    setMediaComponentsHTML(element, medias);\n    setButtonComponentsHTML(element, buttons);\n    setSoundComponentsHTML(element, sounds);\n    setRepeaterComponentHTML(element, repeater, maxId);\n\n    if (rules) {\n      var _repeater$medias;\n\n      if (duplicate) {\n        setStyleSheetRules(element, associated.name, rules, \"duplicate\");\n      } else {\n        setStyleSheetRules(element, associated.name, rules);\n      }\n\n      setRelativeStyles(rules, medias, (_repeater$medias = repeater.medias) !== null && _repeater$medias !== void 0 ? _repeater$medias : []);\n      setStyleSheetHTML(element);\n    }\n\n    return element.outerHTML;\n  }\n\n  return html;\n}\n\nfunction setTextComponentsHTML(root, texts) {\n  for (let text of texts) {\n    if (text.id && text.isEdited) {\n      text.isEditable = true;\n      setTextComponent(root, `[blm-id='${text.id.toString()}']`, text);\n    }\n  }\n}\n\nfunction setMediaComponentsHTML(parent, medias) {\n  for (let media of medias) {\n    if (media.id && media.isEdited) {\n      const element = getHTMLElement(parent, `[blm-id='${media.id.toString()}']`);\n\n      if (element) {\n        setMediaComponent(element, media);\n      }\n    }\n  }\n}\n\nfunction setButtonComponentsHTML(parent, buttons) {\n  for (let button of buttons) {\n    if (button.id && button.isEdited) {\n      const element = getHTMLElement(parent, `[blm-id='${button.id.toString()}']`);\n\n      if (element) {\n        setButtonComponent(element, button);\n      }\n    }\n  }\n}\n\nfunction setSoundComponentsHTML(parent, sounds) {\n  for (let sound of sounds) {\n    if (sound.id && sound.isEdited) {\n      const element = getHTMLElement(parent, `[blm-id='${sound.id.toString()}']`);\n\n      if (element) {\n        setSoundComponent(element, sound);\n      }\n    }\n  }\n}\n\nfunction setRepeaterComponentHTML(root, repeater, start) {\n  const {\n    medias = [],\n    buttons = [],\n    sounds = []\n  } = repeater;\n  const {\n    mediaEls,\n    buttonEls,\n    soundEls\n  } = getRepeaterElements(root);\n  const repeaters = [medias, buttons, sounds];\n  const elments = [mediaEls, buttonEls, soundEls];\n  repeaters.forEach((item, i) => {\n    item.forEach((repeater, j) => {\n      var _repeater$value;\n\n      const element = elments[i][j];\n\n      if (element && repeater && repeater.isEdited) {\n        setRepeaterComponent(element, repeater, start + 1);\n      }\n\n      start += ((_repeater$value = repeater.value) === null || _repeater$value === void 0 ? void 0 : _repeater$value.length) || 0;\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/template-builders/html/content/index.ts"],"names":["createHTMLElement","getMaxValue","getHTMLElement","getStyleElementRules","setStyleSheetHTML","setMediaComponent","setRepeaterComponent","setTextComponent","setButtonComponent","setStyleSheetRules","setSoundComponent","getRepeaterElements","setRelativeStyles","setHotspotClass","template","attri","compRatio","imgRatio","html","element","querySelector","classList","add","remove","outerHTML","arrayEquals","a","b","Array","isArray","length","every","val","index","checkPrev","templates","prevEle","testarrat1","testarrat2","map","temp","ind","hotspot1","querySelectorAll","forEach","i","imageVal","getElementsByTagName","src","push","hotspot21","CheckHotspotContainClass","x","from","find","cls","startsWith","hotspot","contains","RemoveHotspotClass","setContentTemplateHTML","content","duplicate","associated","texts","medias","buttons","sounds","repeater","maxId","rules","setTextComponentsHTML","setMediaComponentsHTML","setButtonComponentsHTML","setSoundComponentsHTML","setRepeaterComponentHTML","name","root","text","id","isEdited","isEditable","toString","parent","media","button","sound","start","mediaEls","buttonEls","soundEls","repeaters","elments","item","j","value"],"mappings":"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","sourcesContent":["import {\r\n  ButtonComponent,\r\n  ContentTemplate,\r\n  CourseElementTemplate,\r\n  MediaComponent,\r\n  RepeaterComponent,\r\n  SoundComponent,\r\n  TemplateRepeater,\r\n  TextComponent,\r\n} from \"types\";\r\nimport { createHTMLElement, getMaxValue } from \"utils\";\r\nimport { getHTMLElement, getStyleElementRules, setStyleSheetHTML } from \"../../core\";\r\nimport {\r\n  setMediaComponent,\r\n  setRepeaterComponent,\r\n  setTextComponent,\r\n  setButtonComponent,\r\n  setStyleSheetRules,\r\n  setSoundComponent,\r\n  getRepeaterElements,\r\n  setRelativeStyles,\r\n} from \"../component\";\r\n\r\nexport function setHotspotClass(\r\n  template: CourseElementTemplate,\r\n  attri: any,\r\n  compRatio: number,\r\n  imgRatio: number\r\n) {\r\n  const { html } = template;\r\n  const element = createHTMLElement(html);\r\n\r\n  if (element) {\r\n    if (compRatio < imgRatio) {\r\n      element.querySelector(attri).classList.add(\"horizontal\");\r\n      element.querySelector(attri).classList.remove(\"vertical\");\r\n    } else {\r\n      element.querySelector(attri).classList.add(\"vertical\");\r\n      element.querySelector(attri).classList.remove(\"horizontal\");\r\n    }\r\n\r\n    return element.outerHTML;\r\n  }\r\n}\r\n\r\nfunction arrayEquals(a: Array<any>, b: Array<any>) {\r\n  return (\r\n    Array.isArray(a) &&\r\n    Array.isArray(b) &&\r\n    a.length === b.length &&\r\n    a.every((val, index) => val === b[index])\r\n  );\r\n}\r\n\r\nexport function checkPrev(\r\n  templates: CourseElementTemplate[] | undefined,\r\n  prevEle: CourseElementTemplate[] | undefined\r\n) {\r\n  var testarrat1: Array<any> = [];\r\n  var testarrat2: Array<any> = [];\r\n\r\n  templates?.map((temp: CourseElementTemplate, ind: number) => {\r\n    var html = createHTMLElement(temp.html);\r\n\r\n    var hotspot1 = html?.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\r\n    hotspot1?.forEach((val, i) => {\r\n      var imageVal = val?.querySelector(\".imagewrapper\")?.getElementsByTagName(\"img\")[0].src;\r\n      testarrat1.push(imageVal);\r\n    });\r\n  });\r\n\r\n  prevEle?.map((temp: CourseElementTemplate, ind: number) => {\r\n    var html = createHTMLElement(temp.html);\r\n    var hotspot21 = html?.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\r\n    hotspot21?.forEach((val, i) => {\r\n      var imageVal = val?.querySelector(\".imagewrapper\")?.getElementsByTagName(\"img\")[0].src;\r\n      testarrat2.push(imageVal);\r\n    });\r\n  });\r\n\r\n  return arrayEquals(testarrat1, testarrat2);\r\n}\r\n\r\nexport function CheckHotspotContainClass(templates: CourseElementTemplate[] | undefined) {\r\n  var x = true;\r\n  templates?.map((temp: CourseElementTemplate, ind: number) => {\r\n    var html = createHTMLElement(temp.html);\r\n    if (html?.classList) {\r\n      Array.from(html?.classList).find((cls) => cls.startsWith(\"rt-etr-\"));\r\n      var hotspot = html?.querySelectorAll(`div[blm-component=media][blm-media^=hotspot]`);\r\n\r\n      hotspot?.forEach((val, i) => {\r\n        if (val.classList.contains(\"hotspot\") && val.classList.contains(\"contain\")) {\r\n          if (!(val.classList.contains(\"vertical\") || val.classList.contains(\"horizontal\"))) {\r\n            x = false;\r\n            return x;\r\n          }\r\n        } else if (\r\n          val.classList.contains(\"hotspot\") &&\r\n          val.classList.contains(\"panandzoom_hotspot\")\r\n        ) {\r\n          if (val.classList.contains(\"vertical\") || val.classList.contains(\"horizontal\")) {\r\n            x = false;\r\n            return x;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return x;\r\n}\r\n\r\nexport function RemoveHotspotClass(template: CourseElementTemplate, attri: any) {\r\n  const { html } = template;\r\n  const element = createHTMLElement(html);\r\n\r\n  if (element) {\r\n    element.querySelector(attri).classList.remove(\"vertical\");\r\n    element.querySelector(attri).classList.remove(\"horizontal\");\r\n\r\n    return element.outerHTML;\r\n  }\r\n}\r\n\r\nexport function setContentTemplateHTML(\r\n  template: CourseElementTemplate,\r\n  content: ContentTemplate,\r\n  duplicate?: string\r\n) {\r\n  const { html, template: associated } = template;\r\n  const element = createHTMLElement(html);\r\n  const { texts, medias, buttons, sounds, repeater } = content;\r\n\r\n  if (element) {\r\n    const maxId = getMaxValue([...texts, ...medias, ...buttons], \"id\");\r\n    const rules = getStyleElementRules(element);\r\n\r\n    setTextComponentsHTML(element, texts);\r\n    setMediaComponentsHTML(element, medias);\r\n    setButtonComponentsHTML(element, buttons);\r\n    setSoundComponentsHTML(element, sounds);\r\n    setRepeaterComponentHTML(element, repeater, maxId);\r\n\r\n    if (rules) {\r\n      if (duplicate) {\r\n        setStyleSheetRules(element, associated.name, rules, \"duplicate\");\r\n      } else {\r\n        setStyleSheetRules(element, associated.name, rules);\r\n      }\r\n      setRelativeStyles(rules, medias, repeater.medias ?? []);\r\n      setStyleSheetHTML(element);\r\n    }\r\n\r\n    return element.outerHTML;\r\n  }\r\n\r\n  return html;\r\n}\r\n\r\nfunction setTextComponentsHTML(root: HTMLElement, texts: TextComponent[]) {\r\n  for (let text of texts) {\r\n    if (text.id && text.isEdited) {\r\n      text.isEditable = true;\r\n\r\n      setTextComponent(root, `[blm-id='${text.id.toString()}']`, text);\r\n    }\r\n  }\r\n}\r\n\r\nfunction setMediaComponentsHTML(parent: HTMLElement, medias: MediaComponent[]) {\r\n  for (let media of medias) {\r\n    if (media.id && media.isEdited) {\r\n      const element = getHTMLElement(parent, `[blm-id='${media.id.toString()}']`);\r\n\r\n      if (element) {\r\n        setMediaComponent(element, media);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setButtonComponentsHTML(parent: HTMLElement, buttons: ButtonComponent[]) {\r\n  for (let button of buttons) {\r\n    if (button.id && button.isEdited) {\r\n      const element = getHTMLElement(parent, `[blm-id='${button.id.toString()}']`);\r\n\r\n      if (element) {\r\n        setButtonComponent(element, button);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setSoundComponentsHTML(parent: HTMLElement, sounds: SoundComponent[]) {\r\n  for (let sound of sounds) {\r\n    if (sound.id && sound.isEdited) {\r\n      const element = getHTMLElement(parent, `[blm-id='${sound.id.toString()}']`);\r\n\r\n      if (element) {\r\n        setSoundComponent(element, sound);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction setRepeaterComponentHTML(root: HTMLElement, repeater: TemplateRepeater, start: number) {\r\n  const { medias = [], buttons = [], sounds = [] } = repeater;\r\n  const { mediaEls, buttonEls, soundEls } = getRepeaterElements(root);\r\n  const repeaters = [medias, buttons, sounds];\r\n  const elments = [mediaEls, buttonEls, soundEls];\r\n\r\n  repeaters.forEach((item, i) => {\r\n    (item as RepeaterComponent[]).forEach((repeater, j) => {\r\n      const element = elments[i][j];\r\n\r\n      if (element && repeater && repeater.isEdited) {\r\n        setRepeaterComponent(element, repeater, start + 1);\r\n      }\r\n\r\n      start += repeater.value?.length || 0;\r\n    });\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}