{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajesh\\\\Downloads\\\\bilim (2)\\\\bilim\\\\v1.0\\\\editors\\\\BlmCourseEditor\\\\src\\\\components\\\\content-editor\\\\components\\\\media\\\\hotspot\\\\classic\\\\BlmHotspotClassic.tsx\";\nimport React, { Fragment, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { findObject, validateHotspotItem } from \"utils\";\nimport { useContentEditorCtx } from \"components/content-editor/core\";\nimport { updateMediaComponent } from \"components/content-editor/reducers\";\nimport BlmHotspotHeader from \"../header\";\nimport BlmHotspotPicker from \"../picker\";\nimport BlmHotspotItemProps from \"../properties\";\n\nfunction BlmHotspotClassic(props) {\n  const {\n    data\n  } = props;\n  const [selectedId, setSelectedId] = useState();\n  const {\n    element,\n    template,\n    openDialog,\n    dispatch\n  } = useContentEditorCtx();\n  const {\n    t\n  } = useTranslation(\"content-editor\");\n  const {\n    value: hotspot\n  } = data;\n  const {\n    items\n  } = hotspot;\n  const selectedItem = useMemo(() => selectedId && items && findObject(items, selectedId, \"id\") || (items === null || items === void 0 ? void 0 : items[0]), [items, selectedId]);\n\n  const updateChange = newHotspot => {\n    const newData = { ...data,\n      value: newHotspot\n    };\n\n    if (dispatch) {\n      dispatch(updateMediaComponent(newData));\n    }\n  };\n\n  const handleChange = newHotspot => {\n    updateChange(newHotspot);\n  };\n\n  const handleItemChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    const item = value.id !== (selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.id) ? selectedItem : undefined;\n    validateItem(item, () => {\n      const newHotspot = { ...hotspot\n      };\n\n      if (name === \"add\") {\n        newHotspot.items = [...items, value];\n      } else if (name === \"delete\") {\n        newHotspot.items = items.filter(item => item.id !== value.id);\n      } else if (name === \"move\") {\n        newHotspot.items = items.map(item => item.id === value.id ? value : item);\n      }\n\n      if (name !== \"delete\") {\n        setSelectedId(value.id);\n      } else if (selectedId === value.id) {\n        var _items$;\n\n        setSelectedId((_items$ = items[0]) === null || _items$ === void 0 ? void 0 : _items$.id);\n      }\n\n      updateChange(newHotspot);\n    });\n  };\n\n  const validateItem = (item, callback) => {\n    if (item) {\n      try {\n        template && validateHotspotItem(item, hotspot, template);\n      } catch (error) {\n        openDialog && openDialog(`${t(\"alert.warning\")}`, error.message);\n        return;\n      }\n    }\n\n    callback();\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BlmHotspotHeader, {\n    data: hotspot,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(BlmHotspotPicker, {\n    elementId: element.id,\n    data: hotspot,\n    selectedItem: selectedItem,\n    onChange: handleChange,\n    onItemChange: handleItemChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }), selectedItem && /*#__PURE__*/React.createElement(BlmHotspotItemProps, {\n    data: hotspot,\n    item: selectedItem,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default BlmHotspotClassic;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/components/content-editor/components/media/hotspot/classic/BlmHotspotClassic.tsx"],"names":["React","Fragment","useMemo","useState","useTranslation","findObject","validateHotspotItem","useContentEditorCtx","updateMediaComponent","BlmHotspotHeader","BlmHotspotPicker","BlmHotspotItemProps","BlmHotspotClassic","props","data","selectedId","setSelectedId","element","template","openDialog","dispatch","t","value","hotspot","items","selectedItem","updateChange","newHotspot","newData","handleChange","handleItemChange","event","name","target","item","id","undefined","validateItem","filter","map","callback","error","message"],"mappings":"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","sourcesContent":["import React, { Fragment, useMemo, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { CustomChangeEvent, MediaComponent, MediaHotspot, MediaHotspotItem } from \"types\";\r\nimport { findObject, validateHotspotItem } from \"utils\";\r\nimport { useContentEditorCtx } from \"components/content-editor/core\";\r\nimport { updateMediaComponent } from \"components/content-editor/reducers\";\r\nimport BlmHotspotHeader from \"../header\";\r\nimport BlmHotspotPicker from \"../picker\";\r\nimport BlmHotspotItemProps from \"../properties\";\r\n\r\nexport interface HotspotClassicProps {\r\n  data: MediaComponent & { value: MediaHotspot };\r\n}\r\n\r\nfunction BlmHotspotClassic(props: HotspotClassicProps) {\r\n  const { data } = props;\r\n  const [selectedId, setSelectedId] = useState<string>();\r\n  const { element, template, openDialog, dispatch } = useContentEditorCtx();\r\n  const { t } = useTranslation(\"content-editor\");\r\n  const { value: hotspot } = data;\r\n  const { items } = hotspot;\r\n\r\n  const selectedItem = useMemo(\r\n    () => (selectedId && items && findObject(items, selectedId, \"id\")) || items?.[0],\r\n    [items, selectedId]\r\n  );\r\n\r\n  const updateChange = (newHotspot: MediaHotspot) => {\r\n    const newData = { ...data, value: newHotspot };\r\n\r\n    if (dispatch) {\r\n      dispatch(updateMediaComponent(newData));\r\n    }\r\n  };\r\n\r\n  const handleChange = (newHotspot: MediaHotspot) => {\r\n    updateChange(newHotspot);\r\n  };\r\n\r\n  const handleItemChange = (event: CustomChangeEvent<MediaHotspotItem>) => {\r\n    const { name, value } = event.target;\r\n    const item = value.id !== selectedItem?.id ? selectedItem : undefined;\r\n\r\n    validateItem(item, () => {\r\n      const newHotspot = { ...hotspot };\r\n\r\n      if (name === \"add\") {\r\n        newHotspot.items = [...items, value];\r\n      } else if (name === \"delete\") {\r\n        newHotspot.items = items.filter((item) => item.id !== value.id);\r\n      } else if (name === \"move\") {\r\n        newHotspot.items = items.map((item) => (item.id === value.id ? value : item));\r\n      }\r\n\r\n      if (name !== \"delete\") {\r\n        setSelectedId(value.id);\r\n      } else if (selectedId === value.id) {\r\n        setSelectedId(items[0]?.id);\r\n      }\r\n\r\n      updateChange(newHotspot);\r\n    });\r\n  };\r\n\r\n  const validateItem = (item: MediaHotspotItem | undefined, callback: Function) => {\r\n    if (item) {\r\n      try {\r\n        template && validateHotspotItem(item, hotspot, template);\r\n      } catch (error) {\r\n        openDialog && openDialog(`${t(\"alert.warning\")}`, (error as Error).message);\r\n        return;\r\n      }\r\n    }\r\n\r\n    callback();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <BlmHotspotHeader data={hotspot} onChange={handleChange} />\r\n      <BlmHotspotPicker\r\n        elementId={element!.id}\r\n        data={hotspot}\r\n        selectedItem={selectedItem}\r\n        onChange={handleChange}\r\n        onItemChange={handleItemChange}\r\n      />\r\n      {selectedItem && (\r\n        <BlmHotspotItemProps data={hotspot} item={selectedItem} onChange={handleChange} />\r\n      )}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default BlmHotspotClassic;\r\n"]},"metadata":{},"sourceType":"module"}