{"ast":null,"code":"import { ChapterEvaluationProps } from \"types\";\nimport { ElementType, EvaluationType } from \"editor-constants\";\nimport { toDeepJSONString } from \"utils\";\nimport { fetchAPI } from \"redux/api\";\nimport * as actions from \"../types\";\nexport const getCourseStructure = () => (dispatch, getState) => {\n  const {\n    course: {\n      properties\n    }\n  } = getState();\n\n  if (!properties.id || properties.id === \"\") {\n    return;\n  }\n\n  return dispatch(fetchAPI({\n    url: \"api/course_tree/\" + properties.id,\n    method: \"GET\",\n    authenticated: true,\n    types: [actions.GET_COURSE_STRUCTURE_STARTED, actions.GET_COURSE_STRUCTURE_SUCCESS, actions.GET_COURSE_STRUCTURE_ERROR]\n  }));\n};\nexport const createElement = (parent, element, position) => {\n  const body = {\n    parent: parent.id,\n    title: element.name,\n    type: element.type,\n    summary: element.isSummary ? \"true\" : undefined,\n    position //Now first and last only working, not working at other position.\n\n  };\n\n  if (element.type === ElementType.Evaluation) {\n    const evaluation = new ChapterEvaluationProps();\n    evaluation.evaluation = EvaluationType.Evaluation;\n    evaluation.feedback.checked = true;\n    body.type = ElementType.Chapter;\n    body.direct_evaluation = \"true\";\n    body.isevaluation = \"true\";\n    body.hasfeedback = \"true\";\n    body.eval_param = evaluation;\n  }\n\n  return fetchAPI({\n    url: \"api/create/elem\",\n    method: \"POST\",\n    authenticated: true,\n    body: toDeepJSONString(body),\n    types: [actions.CREATE_ELEMENT_STARTED, actions.CREATE_ELEMENT_SUCCESS, actions.CREATE_ELEMENT_ERROR]\n  });\n};\nexport const renameElement = (element, title, template) => {\n  const body = {\n    title\n  };\n  return fetchAPI({\n    url: \"api/elem/rename/\" + element.id,\n    method: \"PATCH\",\n    meta: template,\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.RENAME_ELEMENT_STARTED, actions.RENAME_ELEMENT_SUCCESS, actions.RENAME_ELEMENT_ERROR]\n  });\n};\nexport const updateElementConnection = (element, posts) => {\n  const body = {\n    elements: posts\n  };\n  return fetchAPI({\n    url: \"api/elem/\" + element.id,\n    method: \"PATCH\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.UPDATE_ELEMENT_CONNECTION_STARTED, actions.UPDATE_ELEMENT_CONNECTION_SUCCESS, actions.UPDATE_ELEMENT_CONNECTION_ERROR]\n  });\n};\nexport const updateAutoSummary = (element, autoSummary) => {\n  const body = {\n    styleSummary: autoSummary ? \"true\" : \"false\"\n  };\n  return fetchAPI({\n    url: \"api/autosummary/\" + element.id,\n    method: \"PATCH\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.UPDATE_ELEMENT_AUTO_SUMMARY_STARTED, actions.UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS, actions.UPDATE_ELEMENT_AUTO_SUMMARY_ERROR]\n  });\n};\nexport const updateElementSummary = (element, summary) => {\n  const body = {\n    summary: summary ? \"true\" : \"false\"\n  };\n  return fetchAPI({\n    url: \"api/summary/\" + element.id,\n    method: \"PATCH\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.UPDATE_ELEMENT_SUMMARY_STARTED, actions.UPDATE_ELEMENT_SUMMARY_SUCCESS, actions.UPDATE_ELEMENT_SUMMARY_ERROR]\n  });\n};\nexport const deleteElement = element => {\n  var _element$parent;\n\n  const body = {\n    parent: (_element$parent = element.parent) === null || _element$parent === void 0 ? void 0 : _element$parent.id\n  };\n  return fetchAPI({\n    url: \"api/course_tree/\" + element.id,\n    method: \"DELETE\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.DELETE_ELEMENT_STARTED, actions.DELETE_ELEMENT_SUCCESS, actions.DELETE_ELEMENT_ERROR]\n  });\n};\nexport const duplicateElement = (element, type, newParent, courseId) => {\n  var body = {};\n\n  if (type && newParent) {\n    var _element$parent2;\n\n    body = {\n      parent: (_element$parent2 = element.parent) === null || _element$parent2 === void 0 ? void 0 : _element$parent2.id,\n      nparent: newParent,\n      actiontype: type,\n      ncourseId: courseId\n    };\n  } else {\n    var _element$parent3;\n\n    body = {\n      parent: (_element$parent3 = element.parent) === null || _element$parent3 === void 0 ? void 0 : _element$parent3.id\n    };\n  }\n\n  return fetchAPI({\n    url: \"api/course_tree/duplicate/\" + element.id,\n    method: \"POST\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.DUPLICATE_ELEMENT_STARTED, actions.DUPLICATE_ELEMENT_SUCCESS, actions.DUPLICATE_ELEMENT_ERROR]\n  });\n};\nexport const positionElement = (element, oldParent, newParent, newPosition) => {\n  const body = {\n    cid: element.id,\n    cparent: oldParent.id,\n    nparent: newParent.id,\n    npos: newPosition\n  };\n  return fetchAPI({\n    url: \"api/change/elem/\" + element.id,\n    method: \"PATCH\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.POSITION_ELEMENT_STARTED, actions.POSITION_ELEMENT_SUCCESS, actions.POSITION_ELEMENT_ERROR]\n  });\n};\nexport const subMenuPositionElement = (elementId, oldParent, newParent, newPosition, copyFrom) => {\n  var body = {};\n\n  if (copyFrom) {\n    body = {\n      cid: elementId,\n      cparent: oldParent,\n      nparent: newParent,\n      npos: newPosition,\n      actiontype: copyFrom\n    };\n  } else {\n    body = {\n      cid: elementId,\n      cparent: oldParent,\n      nparent: newParent,\n      npos: newPosition\n    };\n  }\n\n  return fetchAPI({\n    url: \"api/change/elem/\" + elementId,\n    method: \"PATCH\",\n    authenticated: true,\n    body: JSON.stringify(body),\n    types: [actions.POSITION_ELEMENT_STARTED, actions.POSITION_ELEMENT_SUCCESS, actions.POSITION_ELEMENT_ERROR]\n  });\n};","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/redux/course/structure/actions/index.ts"],"names":["ChapterEvaluationProps","ElementType","EvaluationType","toDeepJSONString","fetchAPI","actions","getCourseStructure","dispatch","getState","course","properties","id","url","method","authenticated","types","GET_COURSE_STRUCTURE_STARTED","GET_COURSE_STRUCTURE_SUCCESS","GET_COURSE_STRUCTURE_ERROR","createElement","parent","element","position","body","title","name","type","summary","isSummary","undefined","Evaluation","evaluation","feedback","checked","Chapter","direct_evaluation","isevaluation","hasfeedback","eval_param","CREATE_ELEMENT_STARTED","CREATE_ELEMENT_SUCCESS","CREATE_ELEMENT_ERROR","renameElement","template","meta","JSON","stringify","RENAME_ELEMENT_STARTED","RENAME_ELEMENT_SUCCESS","RENAME_ELEMENT_ERROR","updateElementConnection","posts","elements","UPDATE_ELEMENT_CONNECTION_STARTED","UPDATE_ELEMENT_CONNECTION_SUCCESS","UPDATE_ELEMENT_CONNECTION_ERROR","updateAutoSummary","autoSummary","styleSummary","UPDATE_ELEMENT_AUTO_SUMMARY_STARTED","UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS","UPDATE_ELEMENT_AUTO_SUMMARY_ERROR","updateElementSummary","UPDATE_ELEMENT_SUMMARY_STARTED","UPDATE_ELEMENT_SUMMARY_SUCCESS","UPDATE_ELEMENT_SUMMARY_ERROR","deleteElement","DELETE_ELEMENT_STARTED","DELETE_ELEMENT_SUCCESS","DELETE_ELEMENT_ERROR","duplicateElement","newParent","courseId","nparent","actiontype","ncourseId","DUPLICATE_ELEMENT_STARTED","DUPLICATE_ELEMENT_SUCCESS","DUPLICATE_ELEMENT_ERROR","positionElement","oldParent","newPosition","cid","cparent","npos","POSITION_ELEMENT_STARTED","POSITION_ELEMENT_SUCCESS","POSITION_ELEMENT_ERROR","subMenuPositionElement","elementId","copyFrom"],"mappings":"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","sourcesContent":["import {\r\n  ChapterEvaluationProps,\r\n  CourseElement,\r\n  CourseElementTemplate,\r\n  UpdateElementConnectionPost,\r\n} from \"types\";\r\nimport { ElementType, EvaluationType } from \"editor-constants\";\r\nimport { toDeepJSONString } from \"utils\";\r\nimport { fetchAPI } from \"redux/api\";\r\nimport { ApiThunkAction } from \"redux/types\";\r\nimport * as actions from \"../types\";\r\n\r\nexport const getCourseStructure = (): ApiThunkAction => (dispatch, getState) => {\r\n  const {\r\n    course: { properties },\r\n  } = getState();\r\n\r\n  if (!properties.id || properties.id === \"\") {\r\n    return;\r\n  }\r\n\r\n  return dispatch(\r\n    fetchAPI({\r\n      url: \"api/course_tree/\" + properties.id,\r\n      method: \"GET\",\r\n      authenticated: true,\r\n      types: [\r\n        actions.GET_COURSE_STRUCTURE_STARTED,\r\n        actions.GET_COURSE_STRUCTURE_SUCCESS,\r\n        actions.GET_COURSE_STRUCTURE_ERROR,\r\n      ],\r\n    })\r\n  );\r\n};\r\n\r\nexport const createElement = (\r\n  parent: CourseElement,\r\n  element: Pick<CourseElement, \"name\" | \"type\" | \"isSummary\">,\r\n  position?: number\r\n) => {\r\n  const body: any = {\r\n    parent: parent.id,\r\n    title: element.name,\r\n    type: element.type,\r\n    summary: element.isSummary ? \"true\" : undefined,\r\n    position, //Now first and last only working, not working at other position.\r\n  };\r\n\r\n  if (element.type === ElementType.Evaluation) {\r\n    const evaluation = new ChapterEvaluationProps();\r\n    evaluation.evaluation = EvaluationType.Evaluation;\r\n    evaluation.feedback.checked = true;\r\n\r\n    body.type = ElementType.Chapter;\r\n    body.direct_evaluation = \"true\";\r\n    body.isevaluation = \"true\";\r\n    body.hasfeedback = \"true\";\r\n    body.eval_param = evaluation;\r\n  }\r\n\r\n  return fetchAPI({\r\n    url: \"api/create/elem\",\r\n    method: \"POST\",\r\n    authenticated: true,\r\n    body: toDeepJSONString(body),\r\n    types: [\r\n      actions.CREATE_ELEMENT_STARTED,\r\n      actions.CREATE_ELEMENT_SUCCESS,\r\n      actions.CREATE_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const renameElement = (\r\n  element: Pick<CourseElement, \"id\">,\r\n  title: string,\r\n  template?: CourseElementTemplate\r\n) => {\r\n  const body = { title };\r\n\r\n  return fetchAPI({\r\n    url: \"api/elem/rename/\" + element.id,\r\n    method: \"PATCH\",\r\n    meta: template,\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.RENAME_ELEMENT_STARTED,\r\n      actions.RENAME_ELEMENT_SUCCESS,\r\n      actions.RENAME_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const updateElementConnection = (\r\n  element: CourseElement,\r\n  posts: UpdateElementConnectionPost[]\r\n) => {\r\n  const body = {\r\n    elements: posts,\r\n  };\r\n\r\n  return fetchAPI({\r\n    url: \"api/elem/\" + element.id,\r\n    method: \"PATCH\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.UPDATE_ELEMENT_CONNECTION_STARTED,\r\n      actions.UPDATE_ELEMENT_CONNECTION_SUCCESS,\r\n      actions.UPDATE_ELEMENT_CONNECTION_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const updateAutoSummary = (element: CourseElement, autoSummary: boolean) => {\r\n  const body = {\r\n    styleSummary: autoSummary ? \"true\" : \"false\",\r\n  };\r\n\r\n  return fetchAPI({\r\n    url: \"api/autosummary/\" + element.id,\r\n    method: \"PATCH\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.UPDATE_ELEMENT_AUTO_SUMMARY_STARTED,\r\n      actions.UPDATE_ELEMENT_AUTO_SUMMARY_SUCCESS,\r\n      actions.UPDATE_ELEMENT_AUTO_SUMMARY_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const updateElementSummary = (element: CourseElement, summary: boolean) => {\r\n  const body = {\r\n    summary: summary ? \"true\" : \"false\",\r\n  };\r\n\r\n  return fetchAPI({\r\n    url: \"api/summary/\" + element.id,\r\n    method: \"PATCH\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.UPDATE_ELEMENT_SUMMARY_STARTED,\r\n      actions.UPDATE_ELEMENT_SUMMARY_SUCCESS,\r\n      actions.UPDATE_ELEMENT_SUMMARY_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const deleteElement = (element: CourseElement) => {\r\n  const body = { parent: element.parent?.id };\r\n\r\n  return fetchAPI({\r\n    url: \"api/course_tree/\" + element.id,\r\n    method: \"DELETE\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.DELETE_ELEMENT_STARTED,\r\n      actions.DELETE_ELEMENT_SUCCESS,\r\n      actions.DELETE_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const duplicateElement = (\r\n  element: CourseElement,\r\n  type?: string,\r\n  newParent?: string | undefined,\r\n  courseId?: string | null\r\n) => {\r\n  var body = {};\r\n  if (type && newParent) {\r\n    body = {\r\n      parent: element.parent?.id,\r\n      nparent: newParent,\r\n      actiontype: type,\r\n      ncourseId: courseId,\r\n    };\r\n  } else {\r\n    body = { parent: element.parent?.id };\r\n  }\r\n\r\n  return fetchAPI({\r\n    url: \"api/course_tree/duplicate/\" + element.id,\r\n    method: \"POST\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.DUPLICATE_ELEMENT_STARTED,\r\n      actions.DUPLICATE_ELEMENT_SUCCESS,\r\n      actions.DUPLICATE_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const positionElement = (\r\n  element: CourseElement,\r\n  oldParent: CourseElement,\r\n  newParent: CourseElement,\r\n  newPosition: number\r\n) => {\r\n  const body = { cid: element.id, cparent: oldParent.id, nparent: newParent.id, npos: newPosition };\r\n\r\n  return fetchAPI({\r\n    url: \"api/change/elem/\" + element.id,\r\n    method: \"PATCH\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.POSITION_ELEMENT_STARTED,\r\n      actions.POSITION_ELEMENT_SUCCESS,\r\n      actions.POSITION_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n\r\nexport const subMenuPositionElement = (\r\n  elementId: string | undefined,\r\n  oldParent: string | undefined,\r\n  newParent: string | undefined,\r\n  newPosition: number,\r\n  copyFrom?: string\r\n) => {\r\n  var body = {};\r\n  if (copyFrom) {\r\n    body = {\r\n      cid: elementId,\r\n      cparent: oldParent,\r\n      nparent: newParent,\r\n      npos: newPosition,\r\n      actiontype: copyFrom,\r\n    };\r\n  } else {\r\n    body = { cid: elementId, cparent: oldParent, nparent: newParent, npos: newPosition };\r\n  }\r\n  return fetchAPI({\r\n    url: \"api/change/elem/\" + elementId,\r\n    method: \"PATCH\",\r\n    authenticated: true,\r\n    body: JSON.stringify(body),\r\n    types: [\r\n      actions.POSITION_ELEMENT_STARTED,\r\n      actions.POSITION_ELEMENT_SUCCESS,\r\n      actions.POSITION_ELEMENT_ERROR,\r\n    ],\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}