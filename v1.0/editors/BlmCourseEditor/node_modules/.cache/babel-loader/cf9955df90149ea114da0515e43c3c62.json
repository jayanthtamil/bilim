{"ast":null,"code":"import { camelToKebab } from \"./common\";\nexport function getElementPositionInWindow(element, parent) {\n  var xPosition = 0;\n  var yPosition = 0;\n\n  while (element && !(parent && (element === parent || element.contains(parent)))) {\n    xPosition += element.offsetLeft - element.scrollLeft + element.clientLeft;\n    yPosition += element.offsetTop - element.scrollTop + element.clientTop;\n    element = element.offsetParent;\n  }\n\n  return {\n    x: xPosition,\n    y: yPosition\n  };\n}\nexport const createDocument = str => {\n  const dom = new DOMParser();\n  const doc = dom.parseFromString(str, \"text/html\");\n  return doc;\n};\nexport const addClassToString = (str, clsList, selector) => {\n  if (str && clsList) {\n    const root = createHTMLElement(str);\n    const element = root && selector ? getElementBySelector(root, selector) : root;\n\n    if (root && element) {\n      for (let cls of clsList) {\n        if (!element.classList.contains(cls)) {\n          element.classList.add(cls);\n        }\n      }\n\n      return root.outerHTML;\n    }\n  }\n\n  return str;\n};\nexport const removeClassFromString = (str, clsList, selector) => {\n  if (str && clsList) {\n    const root = createHTMLElement(str);\n    const element = root && selector ? getElementBySelector(root, selector) : root;\n\n    if (root && element) {\n      for (let cls of clsList) {\n        if (element.classList.contains(cls)) {\n          element.classList.remove(cls);\n        }\n      }\n\n      return root.outerHTML;\n    }\n  }\n\n  return str;\n};\nexport const getAttributeFromString = (str, attribute, selector) => {\n  if (str && attribute) {\n    const root = createHTMLElement(str);\n    const element = root && selector ? getElementBySelector(root, selector) : root;\n\n    if (element) {\n      return element.getAttribute(attribute);\n    }\n  }\n\n  return null;\n};\nexport const toggleAttributeInString = (str, attributes, selector) => {\n  if (str && attributes) {\n    const root = createHTMLElement(str);\n    const element = root && selector ? getElementBySelector(root, selector) : root;\n\n    if (root && element) {\n      for (const attr in attributes) {\n        const value = attributes[attr];\n\n        if (value !== undefined) {\n          element.setAttribute(attr, value);\n        } else {\n          element.removeAttribute(attr);\n        }\n      }\n\n      return root.outerHTML;\n    }\n  }\n\n  return typeof str === \"string\" ? str : str.outerHTML;\n};\nexport const copyAttributesInString = (source, destination, attributes, selector) => {\n  if (source && destination) {\n    const rootSrc = createHTMLElement(source);\n    const rootDes = createHTMLElement(destination);\n    const srcEle = rootSrc && selector ? getElementBySelector(rootSrc, selector) : rootSrc;\n    const desEle = rootDes && selector ? getElementBySelector(rootDes, selector) : rootDes;\n\n    if (rootDes && srcEle && desEle) {\n      attributes.forEach(attr => {\n        const value = srcEle.getAttribute(attr);\n\n        if (value !== null && value !== undefined) {\n          desEle.setAttribute(attr, value);\n        }\n      });\n      return rootDes.outerHTML;\n    }\n  }\n\n  return typeof destination === \"string\" ? destination : destination.outerHTML;\n};\nexport const getElementBySelector = (element, selector) => {\n  if (element && selector) {\n    const root = typeof element === \"string\" ? createHTMLElement(element) : element;\n\n    if (root === null || root === void 0 ? void 0 : root.matches(selector)) {\n      return root;\n    } else if (root) {\n      return root.querySelector(selector);\n    }\n  }\n\n  return null;\n};\nexport const removeElementInString = (str, selector) => {\n  if (str && selector) {\n    const root = typeof str === \"string\" ? createHTMLElement(str) : str;\n    const element = root && getElementBySelector(root, selector);\n\n    if (root && element && element.parentElement) {\n      var _element$parentElemen;\n\n      (_element$parentElemen = element.parentElement) === null || _element$parentElemen === void 0 ? void 0 : _element$parentElemen.removeChild(element);\n      return root.outerHTML;\n    }\n  }\n\n  return typeof str === \"string\" ? str : str.outerHTML;\n};\nexport const createHTMLElement = str => {\n  if (typeof str === \"string\" && str !== \"\") {\n    const doc = createDocument(str);\n    return doc.body.firstElementChild;\n  } else if (str) {\n    return str;\n  }\n\n  return null;\n};\nexport const decodeHTML = html => {\n  const doc = createDocument(\"<div></div>\");\n  var txt = doc.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n};\nexport const removeAllChildren = element => {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n};\nexport const updateInnerHTML = (html, selector, innerHtml) => {\n  if (html) {\n    const root = createHTMLElement(html);\n\n    if (root) {\n      const element = root.querySelector(selector);\n\n      if (element) {\n        element.innerHTML = innerHtml;\n      }\n\n      return root.outerHTML;\n    }\n  }\n\n  return html;\n};\nexport function getParentIFrame(element) {\n  const doc = element.ownerDocument;\n  const win = doc.defaultView; // || doc.parentWindow;\n\n  if (win === null || win === void 0 ? void 0 : win.frameElement) {\n    return win === null || win === void 0 ? void 0 : win.frameElement;\n  }\n}\nexport function getIFrameClientRect(element) {\n  if (element) {\n    const frame = getParentIFrame(element);\n\n    if (frame) {\n      return frame.getBoundingClientRect();\n    }\n  }\n\n  return {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0\n  };\n}\nexport function getIFrameElementClientRect(element) {\n  const frameRect = getIFrameClientRect(element);\n  const rect = element.getBoundingClientRect();\n  return {\n    x: frameRect.x + rect.x,\n    y: frameRect.y + rect.y,\n    width: rect.width,\n    height: rect.height,\n    top: frameRect.top + rect.top,\n    left: frameRect.left + rect.left,\n    bottom: frameRect.top + rect.bottom,\n    right: frameRect.left + rect.right\n  };\n}\nexport function hasPixel(str) {\n  return str.endsWith(\"px\");\n}\nexport function unitToValue(value) {\n  return parseInt(value || \"0\", 10).toString();\n}\nexport function valueToUnit(value, isPixel = true) {\n  return (value || \"0\") + (isPixel ? \"px\" : \"%\");\n}\nexport function updateStyleInnerHTML(style) {\n  var _style$sheet;\n\n  const rules = (_style$sheet = style.sheet) === null || _style$sheet === void 0 ? void 0 : _style$sheet.cssRules;\n\n  if (rules) {\n    style.innerHTML = Array.from(rules).reduce((str, rule) => str += \"\\n\" + rule.cssText, \"\");\n  }\n}\nexport function isElementVisibleInFrame(element, partial = true) {\n  const frame = getParentIFrame(element);\n  const rect1 = {\n    top: 0,\n    bottom: (frame === null || frame === void 0 ? void 0 : frame.clientHeight) || 0\n  };\n  const rect2 = element.getBoundingClientRect(); //Check if in view\n\n  const isTotal = rect1.top <= rect2.top && rect2.bottom <= rect1.bottom;\n  const isPartial = partial && (rect2.top < rect1.top && rect1.top < rect2.bottom || rect2.top < rect1.bottom && rect1.bottom < rect2.bottom);\n  return isTotal || isPartial;\n}\nexport function getMouseRelativePos(event, element) {\n  const target = element || event.currentTarget;\n  const bounds = target.getBoundingClientRect();\n  return {\n    x: event.clientX - bounds.left,\n    y: event.clientY - bounds.top\n  };\n}\nexport function getStyleSheet(doc, filename) {\n  for (let i = 0; i < doc.styleSheets.length; i++) {\n    var _sheet$href;\n\n    const sheet = doc.styleSheets[i];\n    if ((_sheet$href = sheet.href) === null || _sheet$href === void 0 ? void 0 : _sheet$href.endsWith(filename)) return sheet;\n  }\n} //Now returned rule matched against simple, combined and group selector.\n//Todo: we have to match other type of selector if needed.\n\nexport function getStyleSheetRule(sheet, selector) {\n  const rules = sheet.cssRules;\n  return Array.from(rules).reduce((result, rule) => {\n    //rule instanceOf CSSStyleRule condition not working in chrome\n    if (\"selectorText\" in rule) {\n      const obj = rule;\n\n      if (obj.selectorText.match(selector)) {\n        const arr = obj.selectorText.split(\",\");\n\n        if (arr.some(str => str.endsWith(selector))) {\n          if (!result) {\n            result = obj;\n          } else {\n            copyCSSStyleDeclarations(obj.style, result.style);\n          }\n        }\n      }\n    }\n\n    return result;\n  }, undefined);\n}\n\nfunction copyCSSStyleDeclarations(source, target) {\n  for (let i = 0; i < source.length; i++) {\n    const key = source.item(i);\n    const value = source.getPropertyValue(key);\n    target.setProperty(key, value);\n  }\n}\n\nexport function createStyleStrFromObj(obj) {\n  const arr = [];\n\n  for (const key in obj) {\n    const value = obj[key];\n    arr.push(`${camelToKebab(key)}: ${value};`);\n  }\n\n  return arr.join(\" \");\n}\nexport function stringifyAttr(attr, value) {\n  if (value) {\n    return `${attr}='${JSON.stringify(value)}'`;\n  }\n\n  return \"\";\n}\nexport function textArea(str, replaceFirst, replaceSecond) {\n  return str.replaceAll(replaceFirst, replaceSecond);\n}\n;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/utils/core/html.ts"],"names":["camelToKebab","getElementPositionInWindow","element","parent","xPosition","yPosition","contains","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","x","y","createDocument","str","dom","DOMParser","doc","parseFromString","addClassToString","clsList","selector","root","createHTMLElement","getElementBySelector","cls","classList","add","outerHTML","removeClassFromString","remove","getAttributeFromString","attribute","getAttribute","toggleAttributeInString","attributes","attr","value","undefined","setAttribute","removeAttribute","copyAttributesInString","source","destination","rootSrc","rootDes","srcEle","desEle","forEach","matches","querySelector","removeElementInString","parentElement","removeChild","body","firstElementChild","decodeHTML","html","txt","createElement","innerHTML","removeAllChildren","firstChild","updateInnerHTML","innerHtml","getParentIFrame","ownerDocument","win","defaultView","frameElement","getIFrameClientRect","frame","getBoundingClientRect","width","height","top","left","bottom","right","getIFrameElementClientRect","frameRect","rect","hasPixel","endsWith","unitToValue","parseInt","toString","valueToUnit","isPixel","updateStyleInnerHTML","style","rules","sheet","cssRules","Array","from","reduce","rule","cssText","isElementVisibleInFrame","partial","rect1","clientHeight","rect2","isTotal","isPartial","getMouseRelativePos","event","target","currentTarget","bounds","clientX","clientY","getStyleSheet","filename","i","styleSheets","length","href","getStyleSheetRule","result","obj","selectorText","match","arr","split","some","copyCSSStyleDeclarations","key","item","getPropertyValue","setProperty","createStyleStrFromObj","push","join","stringifyAttr","JSON","stringify","textArea","replaceFirst","replaceSecond","replaceAll"],"mappings":"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","sourcesContent":["import { MouseEvent } from \"react\";\r\nimport { SimpleObject } from \"types\";\r\nimport { camelToKebab } from \"./common\";\r\n\r\nexport function getElementPositionInWindow(element: HTMLElement, parent?: HTMLElement) {\r\n  var xPosition = 0;\r\n  var yPosition = 0;\r\n\r\n  while (element && !(parent && (element === parent || element.contains(parent)))) {\r\n    xPosition += element.offsetLeft - element.scrollLeft + element.clientLeft;\r\n    yPosition += element.offsetTop - element.scrollTop + element.clientTop;\r\n\r\n    element = element.offsetParent as HTMLElement;\r\n  }\r\n  return { x: xPosition, y: yPosition };\r\n}\r\n\r\nexport const createDocument = (str: string) => {\r\n  const dom = new DOMParser();\r\n  const doc = dom.parseFromString(str, \"text/html\");\r\n\r\n  return doc;\r\n};\r\n\r\nexport const addClassToString = (str: string, clsList: string[], selector?: string) => {\r\n  if (str && clsList) {\r\n    const root = createHTMLElement(str);\r\n    const element = root && selector ? getElementBySelector(root, selector) : root;\r\n\r\n    if (root && element) {\r\n      for (let cls of clsList) {\r\n        if (!element.classList.contains(cls)) {\r\n          element.classList.add(cls);\r\n        }\r\n      }\r\n\r\n      return root.outerHTML;\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\nexport const removeClassFromString = (str: string, clsList: string[], selector?: string) => {\r\n  if (str && clsList) {\r\n    const root = createHTMLElement(str);\r\n    const element = root && selector ? getElementBySelector(root, selector) : root;\r\n\r\n    if (root && element) {\r\n      for (let cls of clsList) {\r\n        if (element.classList.contains(cls)) {\r\n          element.classList.remove(cls);\r\n        }\r\n      }\r\n\r\n      return root.outerHTML;\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\nexport const getAttributeFromString = (\r\n  str: string | HTMLElement,\r\n  attribute: string,\r\n  selector?: string\r\n) => {\r\n  if (str && attribute) {\r\n    const root = createHTMLElement(str);\r\n    const element = root && selector ? getElementBySelector(root, selector) : root;\r\n\r\n    if (element) {\r\n      return element.getAttribute(attribute);\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const toggleAttributeInString = (\r\n  str: string | HTMLElement,\r\n  attributes: SimpleObject,\r\n  selector?: string\r\n) => {\r\n  if (str && attributes) {\r\n    const root = createHTMLElement(str);\r\n    const element = root && selector ? getElementBySelector(root, selector) : root;\r\n\r\n    if (root && element) {\r\n      for (const attr in attributes) {\r\n        const value = attributes[attr];\r\n\r\n        if (value !== undefined) {\r\n          element.setAttribute(attr, value);\r\n        } else {\r\n          element.removeAttribute(attr);\r\n        }\r\n      }\r\n\r\n      return root.outerHTML;\r\n    }\r\n  }\r\n\r\n  return typeof str === \"string\" ? str : str.outerHTML;\r\n};\r\n\r\nexport const copyAttributesInString = (\r\n  source: string | HTMLElement,\r\n  destination: string | HTMLElement,\r\n  attributes: string[],\r\n  selector?: string\r\n) => {\r\n  if (source && destination) {\r\n    const rootSrc = createHTMLElement(source);\r\n    const rootDes = createHTMLElement(destination);\r\n    const srcEle = rootSrc && selector ? getElementBySelector(rootSrc, selector) : rootSrc;\r\n    const desEle = rootDes && selector ? getElementBySelector(rootDes, selector) : rootDes;\r\n\r\n    if (rootDes && srcEle && desEle) {\r\n      attributes.forEach((attr) => {\r\n        const value = srcEle.getAttribute(attr);\r\n\r\n        if (value !== null && value !== undefined) {\r\n          desEle.setAttribute(attr, value);\r\n        }\r\n      });\r\n\r\n      return rootDes.outerHTML;\r\n    }\r\n  }\r\n\r\n  return typeof destination === \"string\" ? destination : destination.outerHTML;\r\n};\r\n\r\nexport const getElementBySelector = (element: string | HTMLElement, selector: string) => {\r\n  if (element && selector) {\r\n    const root = typeof element === \"string\" ? createHTMLElement(element) : element;\r\n\r\n    if (root?.matches(selector)) {\r\n      return root;\r\n    } else if (root) {\r\n      return root.querySelector(selector) as HTMLElement;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const removeElementInString = (str: string | HTMLElement, selector: string) => {\r\n  if (str && selector) {\r\n    const root = typeof str === \"string\" ? createHTMLElement(str) : str;\r\n    const element = root && getElementBySelector(root, selector);\r\n\r\n    if (root && element && element.parentElement) {\r\n      element.parentElement?.removeChild(element);\r\n\r\n      return root.outerHTML;\r\n    }\r\n  }\r\n\r\n  return typeof str === \"string\" ? str : str.outerHTML;\r\n};\r\n\r\nexport const createHTMLElement = (str: string | HTMLElement) => {\r\n  if (typeof str === \"string\" && str !== \"\") {\r\n    const doc = createDocument(str);\r\n\r\n    return doc.body.firstElementChild as HTMLElement;\r\n  } else if (str) {\r\n    return str;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const decodeHTML = (html: string) => {\r\n  const doc = createDocument(\"<div></div>\");\r\n  var txt = doc.createElement(\"textarea\");\r\n  txt.innerHTML = html;\r\n\r\n  return txt.value;\r\n};\r\n\r\nexport const removeAllChildren = (element: HTMLElement) => {\r\n  while (element.firstChild) {\r\n    element.removeChild(element.firstChild);\r\n  }\r\n};\r\n\r\nexport const updateInnerHTML = (html: string, selector: string, innerHtml: string) => {\r\n  if (html) {\r\n    const root = createHTMLElement(html);\r\n\r\n    if (root) {\r\n      const element = root.querySelector(selector);\r\n\r\n      if (element) {\r\n        element.innerHTML = innerHtml;\r\n      }\r\n\r\n      return root.outerHTML;\r\n    }\r\n  }\r\n\r\n  return html;\r\n};\r\n\r\nexport function getParentIFrame(element: HTMLElement) {\r\n  const doc = element.ownerDocument;\r\n  const win = doc.defaultView; // || doc.parentWindow;\r\n\r\n  if (win?.frameElement) {\r\n    return win?.frameElement as HTMLIFrameElement;\r\n  }\r\n}\r\n\r\nexport function getIFrameClientRect(element: HTMLElement) {\r\n  if (element) {\r\n    const frame = getParentIFrame(element);\r\n\r\n    if (frame) {\r\n      return frame.getBoundingClientRect();\r\n    }\r\n  }\r\n\r\n  return {\r\n    x: 0,\r\n    y: 0,\r\n    width: 0,\r\n    height: 0,\r\n    top: 0,\r\n    left: 0,\r\n    bottom: 0,\r\n    right: 0,\r\n  };\r\n}\r\n\r\nexport function getIFrameElementClientRect(element: HTMLElement) {\r\n  const frameRect = getIFrameClientRect(element);\r\n  const rect = element.getBoundingClientRect();\r\n\r\n  return {\r\n    x: frameRect.x + rect.x,\r\n    y: frameRect.y + rect.y,\r\n    width: rect.width,\r\n    height: rect.height,\r\n    top: frameRect.top + rect.top,\r\n    left: frameRect.left + rect.left,\r\n    bottom: frameRect.top + rect.bottom,\r\n    right: frameRect.left + rect.right,\r\n  };\r\n}\r\n\r\nexport function hasPixel(str: string) {\r\n  return str.endsWith(\"px\");\r\n}\r\n\r\nexport function unitToValue(value: string) {\r\n  return parseInt(value || \"0\", 10).toString();\r\n}\r\n\r\nexport function valueToUnit(value?: string | number, isPixel: boolean = true) {\r\n  return (value || \"0\") + (isPixel ? \"px\" : \"%\");\r\n}\r\n\r\nexport function updateStyleInnerHTML(style: HTMLStyleElement) {\r\n  const rules = style.sheet?.cssRules;\r\n\r\n  if (rules) {\r\n    style.innerHTML = Array.from(rules).reduce((str, rule) => (str += \"\\n\" + rule.cssText), \"\");\r\n  }\r\n}\r\n\r\nexport function isElementVisibleInFrame(element: HTMLElement, partial = true) {\r\n  const frame = getParentIFrame(element);\r\n  const rect1 = { top: 0, bottom: frame?.clientHeight || 0 };\r\n  const rect2 = element.getBoundingClientRect();\r\n\r\n  //Check if in view\r\n  const isTotal = rect1.top <= rect2.top && rect2.bottom <= rect1.bottom;\r\n  const isPartial =\r\n    partial &&\r\n    ((rect2.top < rect1.top && rect1.top < rect2.bottom) ||\r\n      (rect2.top < rect1.bottom && rect1.bottom < rect2.bottom));\r\n\r\n  return isTotal || isPartial;\r\n}\r\n\r\nexport function getMouseRelativePos(event: MouseEvent<HTMLElement>, element?: HTMLElement) {\r\n  const target = element || event.currentTarget;\r\n  const bounds = target.getBoundingClientRect();\r\n\r\n  return { x: event.clientX - bounds.left, y: event.clientY - bounds.top };\r\n}\r\n\r\nexport function getStyleSheet(doc: Document, filename: string) {\r\n  for (let i = 0; i < doc.styleSheets.length; i++) {\r\n    const sheet = doc.styleSheets[i];\r\n\r\n    if (sheet.href?.endsWith(filename)) return sheet;\r\n  }\r\n}\r\n\r\n//Now returned rule matched against simple, combined and group selector.\r\n//Todo: we have to match other type of selector if needed.\r\nexport function getStyleSheetRule(sheet: CSSStyleSheet, selector: string) {\r\n  const rules = sheet.cssRules;\r\n\r\n  return Array.from(rules).reduce((result: CSSRule | undefined, rule) => {\r\n    //rule instanceOf CSSStyleRule condition not working in chrome\r\n    if (\"selectorText\" in rule) {\r\n      const obj = rule as CSSStyleRule;\r\n\r\n      if (obj.selectorText.match(selector)) {\r\n        const arr = obj.selectorText.split(\",\");\r\n\r\n        if (arr.some((str) => str.endsWith(selector))) {\r\n          if (!result) {\r\n            result = obj;\r\n          } else {\r\n            copyCSSStyleDeclarations(obj.style, (result as CSSStyleRule).style);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }, undefined);\r\n}\r\n\r\nfunction copyCSSStyleDeclarations(source: CSSStyleDeclaration, target: CSSStyleDeclaration) {\r\n  for (let i = 0; i < source.length; i++) {\r\n    const key = source.item(i);\r\n    const value = source.getPropertyValue(key);\r\n\r\n    target.setProperty(key, value);\r\n  }\r\n}\r\n\r\nexport function createStyleStrFromObj(obj: SimpleObject) {\r\n  const arr = [];\r\n\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n\r\n    arr.push(`${camelToKebab(key)}: ${value};`);\r\n  }\r\n\r\n  return arr.join(\" \");\r\n}\r\n\r\nexport function stringifyAttr(attr: string, value?: Object) {\r\n  if (value) {\r\n    return `${attr}='${JSON.stringify(value)}'`;\r\n  }\r\n\r\n  return \"\";\r\n}\r\n\r\nexport function textArea(str: string, replaceFirst: string, replaceSecond: string) {\r\n  return str.replaceAll(replaceFirst, replaceSecond);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}