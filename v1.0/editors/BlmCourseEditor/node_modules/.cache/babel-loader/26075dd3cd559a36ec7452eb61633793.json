{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajesh\\\\Downloads\\\\bilim (2)\\\\bilim\\\\v1.0\\\\editors\\\\BlmCourseEditor\\\\src\\\\components\\\\main\\\\course-editor\\\\BlmCourseEditor.tsx\";\nimport React, { useEffect, useCallback } from \"react\";\nimport IdleTimer from \"react-idle-timer\";\nimport { Backdrop } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport BlmStructurePanel from \"components/structures/panel\";\nimport BlmHeader from \"../header\";\nimport BlmLoaders from \"../loaders\";\nimport BlmDialogs from \"../dialogs\";\nimport BlmEditorBoard from \"../editor-board\";\nimport \"./course-editor.scss\";\n\nfunction BlmCourseEditor(props) {\n  const {\n    isAuthorized,\n    isInteractable,\n    getUserAuthorization,\n    initializeCourseProperties,\n    openDialog\n  } = props;\n  const timeout = 1000 * 60 * 30;\n  const {\n    t\n  } = useTranslation();\n  const initEditor = useCallback(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    let courseId = urlParams.get(\"courseId\");\n\n    if (courseId && courseId.length !== 0) {\n      initializeCourseProperties(courseId);\n    } else {\n      openDialog(`${t(\"alert.warning\")}!`, `${t(\"alert.course_not_found\")}`);\n    }\n  }, [initializeCourseProperties, openDialog, t]);\n  useEffect(() => {\n    if (isAuthorized === undefined) {\n      getUserAuthorization();\n    } else if (isAuthorized) {\n      initEditor();\n    }\n  }, [isAuthorized, getUserAuthorization, initEditor]);\n\n  const handleIdle = event => {\n    showSessionExpiredDialog();\n  };\n\n  const showSessionExpiredDialog = () => {\n    openDialog(`${t(\"alert.session_expired\")}`, `${t(\"alert.session_info\")}`, handleSessionExpired);\n  };\n\n  const handleSessionExpired = event => {\n    if (process.env.REACT_APP_LOGOUT_URL) {\n      window.location.href = process.env.REACT_APP_LOGOUT_URL;\n    } else {\n      window.location.href = \"\";\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(IdleTimer, {\n    onIdle: handleIdle,\n    timeout: timeout,\n    stopOnIdle: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BlmLoaders, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"editor-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BlmHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BlmEditorBoard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BlmStructurePanel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(BlmDialogs, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Backdrop, {\n    open: !isInteractable,\n    className: \"editor-backdrop\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default BlmCourseEditor;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/components/main/course-editor/BlmCourseEditor.tsx"],"names":["React","useEffect","useCallback","IdleTimer","Backdrop","useTranslation","BlmStructurePanel","BlmHeader","BlmLoaders","BlmDialogs","BlmEditorBoard","BlmCourseEditor","props","isAuthorized","isInteractable","getUserAuthorization","initializeCourseProperties","openDialog","timeout","t","initEditor","urlParams","URLSearchParams","window","location","search","courseId","get","length","undefined","handleIdle","event","showSessionExpiredDialog","handleSessionExpired","process","env","REACT_APP_LOGOUT_URL","href"],"mappings":"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","sourcesContent":["import React, { useEffect, MouseEvent, useCallback } from \"react\";\r\nimport IdleTimer from \"react-idle-timer\";\r\nimport { Backdrop } from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport BlmStructurePanel from \"components/structures/panel\";\r\nimport BlmHeader from \"../header\";\r\nimport BlmLoaders from \"../loaders\";\r\nimport BlmDialogs from \"../dialogs\";\r\nimport BlmEditorBoard from \"../editor-board\";\r\nimport { ContainerProps } from \"./course-editor-container\";\r\nimport \"./course-editor.scss\";\r\n\r\ninterface CompProps extends ContainerProps {}\r\n\r\nfunction BlmCourseEditor(props: CompProps) {\r\n  const {\r\n    isAuthorized,\r\n    isInteractable,\r\n    getUserAuthorization,\r\n    initializeCourseProperties,\r\n    openDialog,\r\n  } = props;\r\n  const timeout = 1000 * 60 * 30;\r\n  const { t } = useTranslation();\r\n\r\n  const initEditor = useCallback(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    let courseId = urlParams.get(\"courseId\");\r\n\r\n    if (courseId && courseId.length !== 0) {\r\n      initializeCourseProperties(courseId);\r\n    } else {\r\n      openDialog(`${t(\"alert.warning\")}!`, `${t(\"alert.course_not_found\")}`);\r\n    }\r\n  }, [initializeCourseProperties, openDialog, t]);\r\n\r\n  useEffect(() => {\r\n    if (isAuthorized === undefined) {\r\n      getUserAuthorization();\r\n    } else if (isAuthorized) {\r\n      initEditor();\r\n    }\r\n  }, [isAuthorized, getUserAuthorization, initEditor]);\r\n\r\n  const handleIdle = (event: Event) => {\r\n    showSessionExpiredDialog();\r\n  };\r\n\r\n  const showSessionExpiredDialog = () => {\r\n    openDialog(`${t(\"alert.session_expired\")}`, `${t(\"alert.session_info\")}`, handleSessionExpired);\r\n  };\r\n  const handleSessionExpired = (event: MouseEvent) => {\r\n    if (process.env.REACT_APP_LOGOUT_URL) {\r\n      window.location.href = process.env.REACT_APP_LOGOUT_URL;\r\n    } else {\r\n      window.location.href = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IdleTimer onIdle={handleIdle} timeout={timeout} stopOnIdle={true}>\r\n      <BlmLoaders />\r\n      <section className=\"editor-section\">\r\n        <BlmHeader />\r\n        <BlmEditorBoard />\r\n        <BlmStructurePanel />\r\n      </section>\r\n      <BlmDialogs />\r\n      <Backdrop open={!isInteractable} className=\"editor-backdrop\" />\r\n    </IdleTimer>\r\n  );\r\n}\r\n\r\nexport default BlmCourseEditor;\r\n"]},"metadata":{},"sourceType":"module"}