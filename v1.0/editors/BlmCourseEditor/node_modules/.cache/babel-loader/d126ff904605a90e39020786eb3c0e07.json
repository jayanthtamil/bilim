{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajesh\\\\Downloads\\\\bilim (2)\\\\bilim\\\\v1.0\\\\editors\\\\BlmCourseEditor\\\\src\\\\components\\\\course-properties\\\\controls\\\\evaluation\\\\BlmCourseEvaluationProps.tsx\";\nimport React, { Fragment } from \"react\";\nimport { Checkbox, FormControlLabel, MenuItem, Select, Switch } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { EvaluationType } from \"editor-constants\";\nimport { getEvaluationPropsJSON } from \"utils\";\nimport { BlmEvaluationFeedback } from \"components/shared\";\nimport { changeKeyMap } from \"./types\";\nimport \"./styles.scss\";\n\nfunction BlmCourseEvaluationProps(props) {\n  const {\n    structure,\n    data,\n    onChange\n  } = props;\n  const {\n    evaluation\n  } = data;\n  const {\n    t\n  } = useTranslation(\"course-props\");\n\n  const updateChange = newEvaluation => {\n    const newData = { ...data,\n      isEvaluation: newEvaluation.evaluation !== EvaluationType.None,\n      hasFeedback: newEvaluation.feedback.checked,\n      evaluation: newEvaluation,\n      propsJSON: getEvaluationPropsJSON(newEvaluation, data.propsJSON)\n    };\n\n    if (onChange) {\n      onChange(newData);\n    }\n  };\n\n  const handleChange = event => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    let newEvaluation;\n\n    if (changeKeyMap.hasOwnProperty(name)) {\n      const map = changeKeyMap[name];\n      const {\n        obj,\n        key\n      } = map;\n      newEvaluation = { ...evaluation,\n        [obj]: { ...evaluation[obj],\n          [key]: value\n        }\n      };\n    } else if (name === \"feedback\") {\n      const {\n        score,\n        feedback\n      } = value;\n      newEvaluation = { ...evaluation,\n        success_score: score,\n        feedback\n      };\n    } else {\n      newEvaluation = { ...evaluation,\n        [name]: value\n      };\n    }\n\n    if (newEvaluation) {\n      updateChange(newEvaluation);\n    }\n  };\n\n  if (structure) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"course-evaluation-props-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-top-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      name: \"evaluation\",\n      value: evaluation.evaluation,\n      className: \"crs-evaluation-dropdown\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      value: EvaluationType.None,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, t(\"evaluation.list.none\")), /*#__PURE__*/React.createElement(MenuItem, {\n      value: EvaluationType.Evaluation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, t(\"evaluation.list.evaluation\")))), evaluation.evaluation !== EvaluationType.None && /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"save_in_lms\",\n      label: t(\"evaluation.save_lms\"),\n      control: /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 24\n        }\n      }),\n      checked: evaluation.save_in_lms,\n      disabled: evaluation.evaluation !== EvaluationType.Evaluation,\n      className: \"crs-evalutaion-switch-frm-lbl\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(BlmEvaluationFeedback, {\n      element: structure,\n      score: evaluation.success_score,\n      feedback: evaluation.feedback,\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-question-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"crs-evaluation-proposition-feedback-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }, t(\"evaluation.proposition_fb\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-proposition-feedback-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"proposition_feedback_opt1\",\n      label: t(\"evaluation.by_question\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 28\n        }\n      }),\n      checked: evaluation.proposition_feedback.by_question,\n      className: \"crs-evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"proposition_feedback_opt2\",\n      label: t(\"evaluation.in_evaluation_fb\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 28\n        }\n      }),\n      checked: evaluation.proposition_feedback.global,\n      className: \"crs-evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"crs-evaluation-question-feedback-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, t(\"evaluation.question_fb\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-question-feedback-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"question_feedback_opt1\",\n      label: t(\"evaluation.by_question\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 28\n        }\n      }),\n      checked: evaluation.question_feedback.by_question,\n      className: \"crs-evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"question_feedback_opt2\",\n      label: t(\"evaluation.in_evaluation_fb\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 28\n        }\n      }),\n      checked: evaluation.question_feedback.global,\n      className: \"crs-evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-advanced-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"crs-evaluation-advanced-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, t(\"evaluation.advanced\")), /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"advanced_opt1\",\n      label: t(\"evaluation.show_complete\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 26\n        }\n      }),\n      checked: evaluation.advanced.show_as_complete_even_if_no_succeed,\n      className: \"mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(FormControlLabel, {\n      name: \"advanced_opt2\",\n      label: t(\"evaluation.all_sub_eval\"),\n      control: /*#__PURE__*/React.createElement(Checkbox, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 26\n        }\n      }),\n      checked: evaluation.advanced.all_sub_eval_succeed_for_validate,\n      className: \"mui-radio-form-ctrl-lbl-1\",\n      onChange: handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }))));\n  } else {\n    return null;\n  }\n}\n\nexport default BlmCourseEvaluationProps;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/components/course-properties/controls/evaluation/BlmCourseEvaluationProps.tsx"],"names":["React","Fragment","Checkbox","FormControlLabel","MenuItem","Select","Switch","useTranslation","EvaluationType","getEvaluationPropsJSON","BlmEvaluationFeedback","changeKeyMap","BlmCourseEvaluationProps","props","structure","data","onChange","evaluation","t","updateChange","newEvaluation","newData","isEvaluation","None","hasFeedback","feedback","checked","propsJSON","handleChange","event","target","name","value","type","hasOwnProperty","map","obj","key","score","success_score","Evaluation","save_in_lms","proposition_feedback","by_question","global","question_feedback","advanced","show_as_complete_even_if_no_succeed","all_sub_eval_succeed_for_validate"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, Fragment } from \"react\";\r\nimport { Checkbox, FormControlLabel, MenuItem, Select, Switch } from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { CustomChangeEvent, CoursePropsComponent, CourseEvaluationProps } from \"types\";\r\nimport { EvaluationType } from \"editor-constants\";\r\nimport { getEvaluationPropsJSON } from \"utils\";\r\nimport { BlmEvaluationFeedback, EvaluationFeedbackChangeEvent } from \"components/shared\";\r\nimport { changeKeyMap } from \"./types\";\r\nimport { ContainerProps } from \"./container\";\r\nimport \"./styles.scss\";\r\n\r\nexport interface CompProps extends CoursePropsComponent, ContainerProps {}\r\n\r\nfunction BlmCourseEvaluationProps(props: CompProps) {\r\n  const { structure, data, onChange } = props;\r\n  const { evaluation } = data;\r\n  const { t } = useTranslation(\"course-props\");\r\n\r\n  const updateChange = (newEvaluation: CourseEvaluationProps) => {\r\n    const newData = {\r\n      ...data,\r\n      isEvaluation: newEvaluation.evaluation !== EvaluationType.None,\r\n      hasFeedback: newEvaluation.feedback.checked,\r\n      evaluation: newEvaluation,\r\n      propsJSON: getEvaluationPropsJSON(newEvaluation, data.propsJSON),\r\n    };\r\n\r\n    if (onChange) {\r\n      onChange(newData);\r\n    }\r\n  };\r\n\r\n  const handleChange = (\r\n    event: ChangeEvent<any> | EvaluationFeedbackChangeEvent | CustomChangeEvent<number | string>\r\n  ) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\r\n    let newEvaluation: CourseEvaluationProps | undefined;\r\n\r\n    if (changeKeyMap.hasOwnProperty(name)) {\r\n      const map = changeKeyMap[name];\r\n      const { obj, key } = map;\r\n\r\n      newEvaluation = {\r\n        ...evaluation,\r\n        [obj]: {\r\n          ...evaluation[obj],\r\n          [key]: value,\r\n        },\r\n      };\r\n    } else if (name === \"feedback\") {\r\n      const { score, feedback } = value;\r\n\r\n      newEvaluation = {\r\n        ...evaluation,\r\n        success_score: score,\r\n        feedback,\r\n      };\r\n    } else {\r\n      newEvaluation = {\r\n        ...evaluation,\r\n        [name]: value,\r\n      };\r\n    }\r\n\r\n    if (newEvaluation) {\r\n      updateChange(newEvaluation);\r\n    }\r\n  };\r\n\r\n  if (structure) {\r\n    return (\r\n      <div className=\"course-evaluation-props-container\">\r\n        <div className=\"crs-evaluation-top-container\">\r\n          <Select\r\n            name=\"evaluation\"\r\n            value={evaluation.evaluation}\r\n            className=\"crs-evaluation-dropdown\"\r\n            onChange={handleChange}\r\n          >\r\n            <MenuItem value={EvaluationType.None}>{t(\"evaluation.list.none\")}</MenuItem>\r\n            <MenuItem value={EvaluationType.Evaluation}>{t(\"evaluation.list.evaluation\")}</MenuItem>\r\n          </Select>\r\n        </div>\r\n        {evaluation.evaluation !== EvaluationType.None && (\r\n          <Fragment>\r\n            <FormControlLabel\r\n              name=\"save_in_lms\"\r\n              label={t(\"evaluation.save_lms\")}\r\n              control={<Switch />}\r\n              checked={evaluation.save_in_lms}\r\n              disabled={evaluation.evaluation !== EvaluationType.Evaluation}\r\n              className=\"crs-evalutaion-switch-frm-lbl\"\r\n              onChange={handleChange}\r\n            />\r\n            <BlmEvaluationFeedback\r\n              element={structure}\r\n              score={evaluation.success_score}\r\n              feedback={evaluation.feedback}\r\n              onChange={handleChange}\r\n            />\r\n            <div className=\"crs-evaluation-question-container\">\r\n              <span className=\"crs-evaluation-proposition-feedback-title\">\r\n                {t(\"evaluation.proposition_fb\")}\r\n              </span>\r\n              <div className=\"crs-evaluation-proposition-feedback-group\">\r\n                <FormControlLabel\r\n                  name=\"proposition_feedback_opt1\"\r\n                  label={t(\"evaluation.by_question\")}\r\n                  control={<Checkbox />}\r\n                  checked={evaluation.proposition_feedback.by_question}\r\n                  className=\"crs-evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                  onChange={handleChange}\r\n                />\r\n                <FormControlLabel\r\n                  name=\"proposition_feedback_opt2\"\r\n                  label={t(\"evaluation.in_evaluation_fb\")}\r\n                  control={<Checkbox />}\r\n                  checked={evaluation.proposition_feedback.global}\r\n                  className=\"crs-evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                  onChange={handleChange}\r\n                />\r\n              </div>\r\n              <span className=\"crs-evaluation-question-feedback-title\">\r\n                {t(\"evaluation.question_fb\")}\r\n              </span>\r\n              <div className=\"crs-evaluation-question-feedback-group\">\r\n                <FormControlLabel\r\n                  name=\"question_feedback_opt1\"\r\n                  label={t(\"evaluation.by_question\")}\r\n                  control={<Checkbox />}\r\n                  checked={evaluation.question_feedback.by_question}\r\n                  className=\"crs-evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                  onChange={handleChange}\r\n                />\r\n                <FormControlLabel\r\n                  name=\"question_feedback_opt2\"\r\n                  label={t(\"evaluation.in_evaluation_fb\")}\r\n                  control={<Checkbox />}\r\n                  checked={evaluation.question_feedback.global}\r\n                  className=\"crs-evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                  onChange={handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"crs-evaluation-advanced-container\">\r\n              <div className=\"crs-evaluation-advanced-title\">{t(\"evaluation.advanced\")}</div>\r\n              <FormControlLabel\r\n                name=\"advanced_opt1\"\r\n                label={t(\"evaluation.show_complete\")}\r\n                control={<Checkbox />}\r\n                checked={evaluation.advanced.show_as_complete_even_if_no_succeed}\r\n                className=\"mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n              <FormControlLabel\r\n                name=\"advanced_opt2\"\r\n                label={t(\"evaluation.all_sub_eval\")}\r\n                control={<Checkbox />}\r\n                checked={evaluation.advanced.all_sub_eval_succeed_for_validate}\r\n                className=\"mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n          </Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default BlmCourseEvaluationProps;\r\n"]},"metadata":{},"sourceType":"module"}