{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rajesh\\\\Downloads\\\\bilim (2)\\\\bilim\\\\v1.0\\\\editors\\\\BlmCourseEditor\\\\src\\\\components\\\\properties\\\\controls\\\\page-evaluation\\\\BlmPageEvaluationProps.tsx\";\nimport React, { Fragment } from \"react\";\nimport { Radio, RadioGroup, FormControlLabel, Select, MenuItem, Switch, Checkbox } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { EvaluationType, EvaluationQuestionValidate } from \"editor-constants\";\nimport { getEvaluationPropsJSON } from \"utils\";\nimport BlmStructureSelect from \"components/structures/select\";\nimport { BlmEvaluationFeedback } from \"components/shared\";\nimport { changeKeyMap } from \"./utils\";\nimport \"./page-evaluation.scss\";\n\nfunction BlmPageEvaluationProps(props) {\n  const {\n    element,\n    data,\n    onChange\n  } = props;\n  const state = data.evalutionJSON;\n  const {\n    t\n  } = useTranslation(\"properties\");\n\n  const updateChange = newData => {\n    if (onChange) {\n      onChange(newData);\n    }\n  };\n\n  const updateState = newState => {\n    if (newState.question_validate === EvaluationQuestionValidate.OneButtonOfTheEnd) {\n      newState.question_feedback.by_question = false;\n    }\n\n    const newData = { ...data,\n      isEvaluation: newState.evaluation !== EvaluationType.None,\n      hasFeedback: newState.feedback.checked,\n      evalutionJSON: newState,\n      propsJSON: getEvaluationPropsJSON(newState, data.propsJSON)\n    };\n    updateChange(newData);\n  };\n\n  const handleChange = event => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    let newState;\n\n    if (changeKeyMap.hasOwnProperty(name)) {\n      const map = changeKeyMap[name];\n      const {\n        obj,\n        key\n      } = map;\n      newState = { ...state,\n        [obj]: { ...state[obj],\n          [key]: value\n        }\n      };\n    } else if (name === \"feedback\") {\n      const {\n        score,\n        feedback\n      } = value;\n      newState = { ...state,\n        success_score: score,\n        feedback\n      };\n    } else {\n      newState = { ...state,\n        [name]: value\n      };\n    }\n\n    if (newState) {\n      updateState(newState);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"page-evaluation-props-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-top-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    name: \"evaluation\",\n    value: state.evaluation,\n    className: \"evaluation-dropdown\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: EvaluationType.None,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, t(\"evaluation.list.none\")), /*#__PURE__*/React.createElement(MenuItem, {\n    value: EvaluationType.Evaluation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, t(\"tabs.evaluation\"))), state.evaluation === EvaluationType.Evaluation && /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"related_to\",\n    label: t(\"evaluation.related_to\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 24\n      }\n    }),\n    checked: state.related_to.checked,\n    className: \"related-to-lbl\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }), state.related_to.checked && /*#__PURE__*/React.createElement(BlmStructureSelect, {\n    name: \"related_to_value\",\n    value: state.related_to.value,\n    className: \"related-to-select\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }))), state.evaluation !== EvaluationType.None && /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"save_in_lms\",\n    label: t(\"evaluation.save_lms\"),\n    control: /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 22\n      }\n    }),\n    checked: state.save_in_lms,\n    disabled: state.evaluation !== EvaluationType.Evaluation,\n    className: \"evalutaion-switch-frm-lbl\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-fb-quiz-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BlmEvaluationFeedback, {\n    element: element,\n    score: state.success_score,\n    feedback: state.feedback,\n    display: state.feedback.display,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }), state.evaluation === EvaluationType.Evaluation && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"retry-quiz-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"retry_quiz\",\n    label: t(\"evaluation.retry_quiz\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 28\n      }\n    }),\n    checked: state.retry_quiz.checked,\n    className: \"evaluation-retry-quiz-frm-lbl\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }), state.retry_quiz.checked && /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    name: \"retry_quiz_attempts\",\n    value: state.retry_quiz.attempts,\n    className: \"evaluation-retry-quiz-dropdown\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 23\n    }\n  }, t(\"evaluation.list.attempt2\")), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 23\n    }\n  }, t(\"evaluation.list.attempt3\")), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"unlimited\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 23\n    }\n  }, t(\"evaluation.list.unlimited\"))), /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"retry_quiz_lock\",\n    label: t(\"evaluation.lock\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 32\n      }\n    }),\n    checked: state.retry_quiz.lock_when_success,\n    className: \"evaluation-retry-quiz-lock-frm-lbl\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-question-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"evaluation-proposition-feedback-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, t(\"evaluation.proposition_fb\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-proposition-feedback-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"proposition_feedback_opt1\",\n    label: t(\"evaluation.by_question\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 26\n      }\n    }),\n    checked: state.proposition_feedback.by_question,\n    className: \"evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"proposition_feedback_opt2\",\n    label: t(\"evaluation.in_evaluation_fb\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 26\n      }\n    }),\n    checked: state.proposition_feedback.global,\n    className: \"evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"evaluation-question-feedback-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, t(\"evaluation.question_fb\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-question-feedback-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"question_feedback_opt1\",\n    label: t(\"evaluation.by_question\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 26\n      }\n    }),\n    checked: state.question_feedback.by_question,\n    disabled: state.question_validate === EvaluationQuestionValidate.OneButtonOfTheEnd,\n    className: \"evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"question_feedback_opt2\",\n    label: t(\"evaluation.in_evaluation_fb\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 26\n      }\n    }),\n    checked: state.question_feedback.global,\n    className: \"evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"evaluation-question-validate-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, t(\"page_evaluation.validate_button\")), /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"question_validate\",\n    value: state.question_validate,\n    className: \"evaluation-question-validate-group\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    label: t(\"page_evaluation.one_per_ques\"),\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 26\n      }\n    }),\n    value: EvaluationQuestionValidate.OnePerQuestion,\n    className: \"evaluation-question-validate-option mui-radio-form-ctrl-lbl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    label: t(\"page_evaluation.button_end\"),\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 26\n      }\n    }),\n    value: EvaluationQuestionValidate.OneButtonOfTheEnd,\n    className: \"evaluation-question-validate-option mui-radio-form-ctrl-lbl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-advanced-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"evaluation-advanced-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, t(\"evaluation.advanced\")), /*#__PURE__*/React.createElement(FormControlLabel, {\n    name: \"advanced_opt1\",\n    label: t(\"evaluation.show_complete\"),\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 24\n      }\n    }),\n    checked: state.advanced.show_as_complete_even_if_no_succeed,\n    className: \"mui-radio-form-ctrl-lbl-1\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }))));\n}\n\nexport default BlmPageEvaluationProps;","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/components/properties/controls/page-evaluation/BlmPageEvaluationProps.tsx"],"names":["React","Fragment","Radio","RadioGroup","FormControlLabel","Select","MenuItem","Switch","Checkbox","useTranslation","EvaluationType","EvaluationQuestionValidate","getEvaluationPropsJSON","BlmStructureSelect","BlmEvaluationFeedback","changeKeyMap","BlmPageEvaluationProps","props","element","data","onChange","state","evalutionJSON","t","updateChange","newData","updateState","newState","question_validate","OneButtonOfTheEnd","question_feedback","by_question","isEvaluation","evaluation","None","hasFeedback","feedback","checked","propsJSON","handleChange","event","target","name","value","type","hasOwnProperty","map","obj","key","score","success_score","Evaluation","related_to","save_in_lms","display","retry_quiz","attempts","lock_when_success","proposition_feedback","global","OnePerQuestion","advanced","show_as_complete_even_if_no_succeed"],"mappings":";AAAA,OAAOA,KAAP,IAA6BC,QAA7B,QAA6C,OAA7C;AACA,SACEC,KADF,EAEEC,UAFF,EAGEC,gBAHF,EAIEC,MAJF,EAKEC,QALF,EAMEC,MANF,EAOEC,QAPF,QAQO,mBARP;AASA,SAASC,cAAT,QAA+B,eAA/B;AAQA,SAASC,cAAT,EAAyBC,0BAAzB,QAA2D,kBAA3D;AACA,SAASC,sBAAT,QAAuC,OAAvC;AACA,OAAOC,kBAAP,MAA+D,8BAA/D;AACA,SAASC,qBAAT,QAAqE,mBAArE;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAO,wBAAP;;AAMA,SAASC,sBAAT,CAAgCC,KAAhC,EAAkD;AAChD,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA;AAAjB,MAA8BH,KAApC;AACA,QAAMI,KAAK,GAAGF,IAAI,CAACG,aAAnB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAQd,cAAc,CAAC,YAAD,CAA5B;;AAEA,QAAMe,YAAY,GAAIC,OAAD,IAAsD;AACzE,QAAIL,QAAJ,EAAc;AACZA,MAAAA,QAAQ,CAACK,OAAD,CAAR;AACD;AACF,GAJD;;AAMA,QAAMC,WAAW,GAAIC,QAAD,IAAmC;AACrD,QAAIA,QAAQ,CAACC,iBAAT,KAA+BjB,0BAA0B,CAACkB,iBAA9D,EAAiF;AAC/EF,MAAAA,QAAQ,CAACG,iBAAT,CAA2BC,WAA3B,GAAyC,KAAzC;AACD;;AAED,UAAMN,OAAgD,GAAG,EACvD,GAAGN,IADoD;AAEvDa,MAAAA,YAAY,EAAEL,QAAQ,CAACM,UAAT,KAAwBvB,cAAc,CAACwB,IAFE;AAGvDC,MAAAA,WAAW,EAAER,QAAQ,CAACS,QAAT,CAAkBC,OAHwB;AAIvDf,MAAAA,aAAa,EAAEK,QAJwC;AAKvDW,MAAAA,SAAS,EAAE1B,sBAAsB,CAACe,QAAD,EAAWR,IAAI,CAACmB,SAAhB;AALsB,KAAzD;AAQAd,IAAAA,YAAY,CAACC,OAAD,CAAZ;AACD,GAdD;;AAgBA,QAAMc,YAAY,GAChBC,KADmB,IAEhB;AACH,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMC,IAAI,GAAGD,MAAM,CAACC,IAApB;AACA,UAAMC,KAAK,GAAGF,MAAM,CAACG,IAAP,KAAgB,UAAhB,GAA6BH,MAAM,CAACJ,OAApC,GAA8CI,MAAM,CAACE,KAAnE;AACA,QAAIhB,QAAJ;;AAEA,QAAIZ,YAAY,CAAC8B,cAAb,CAA4BH,IAA5B,CAAJ,EAAuC;AACrC,YAAMI,GAAG,GAAG/B,YAAY,CAAC2B,IAAD,CAAxB;AACA,YAAM;AAAEK,QAAAA,GAAF;AAAOC,QAAAA;AAAP,UAAeF,GAArB;AAEAnB,MAAAA,QAAQ,GAAG,EACT,GAAGN,KADM;AAET,SAAC0B,GAAD,GAAO,EACL,GAAG1B,KAAK,CAAC0B,GAAD,CADH;AAEL,WAACC,GAAD,GAAOL;AAFF;AAFE,OAAX;AAOD,KAXD,MAWO,IAAID,IAAI,KAAK,UAAb,EAAyB;AAC9B,YAAM;AAAEO,QAAAA,KAAF;AAASb,QAAAA;AAAT,UAAsBO,KAA5B;AAEAhB,MAAAA,QAAQ,GAAG,EACT,GAAGN,KADM;AAET6B,QAAAA,aAAa,EAAED,KAFN;AAGTb,QAAAA;AAHS,OAAX;AAKD,KARM,MAQA;AACLT,MAAAA,QAAQ,GAAG,EACT,GAAGN,KADM;AAET,SAACqB,IAAD,GAAQC;AAFC,OAAX;AAID;;AAED,QAAIhB,QAAJ,EAAc;AACZD,MAAAA,WAAW,CAACC,QAAD,CAAX;AACD;AACF,GArCD;;AAuCA,sBACE;AAAK,IAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,YADP;AAEE,IAAA,KAAK,EAAEN,KAAK,CAACY,UAFf;AAGE,IAAA,SAAS,EAAC,qBAHZ;AAIE,IAAA,QAAQ,EAAEM,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE7B,cAAc,CAACwB,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuCX,CAAC,CAAC,sBAAD,CAAxC,CANF,eAOE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEb,cAAc,CAACyC,UAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6C5B,CAAC,CAAC,iBAAD,CAA9C,CAPF,CADF,EAUGF,KAAK,CAACY,UAAN,KAAqBvB,cAAc,CAACyC,UAApC,iBACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,YADP;AAEE,IAAA,KAAK,EAAE5B,CAAC,CAAC,uBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAAC+B,UAAN,CAAiBf,OAJ5B;AAKE,IAAA,SAAS,EAAC,gBALZ;AAME,IAAA,QAAQ,EAAEE,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASGlB,KAAK,CAAC+B,UAAN,CAAiBf,OAAjB,iBACC,oBAAC,kBAAD;AACE,IAAA,IAAI,EAAC,kBADP;AAEE,IAAA,KAAK,EAAEhB,KAAK,CAAC+B,UAAN,CAAiBT,KAF1B;AAGE,IAAA,SAAS,EAAC,mBAHZ;AAIE,IAAA,QAAQ,EAAEJ,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,CAXJ,CADF,EAgCGlB,KAAK,CAACY,UAAN,KAAqBvB,cAAc,CAACwB,IAApC,iBACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,aADP;AAEE,IAAA,KAAK,EAAEX,CAAC,CAAC,qBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACgC,WAJjB;AAKE,IAAA,QAAQ,EAAEhC,KAAK,CAACY,UAAN,KAAqBvB,cAAc,CAACyC,UALhD;AAME,IAAA,SAAS,EAAC,2BANZ;AAOE,IAAA,QAAQ,EAAEZ,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAUE;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,qBAAD;AACE,IAAA,OAAO,EAAErB,OADX;AAEE,IAAA,KAAK,EAAEG,KAAK,CAAC6B,aAFf;AAGE,IAAA,QAAQ,EAAE7B,KAAK,CAACe,QAHlB;AAIE,IAAA,OAAO,EAAEf,KAAK,CAACe,QAAN,CAAekB,OAJ1B;AAKE,IAAA,QAAQ,EAAEf,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQGlB,KAAK,CAACY,UAAN,KAAqBvB,cAAc,CAACyC,UAApC,iBACC;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,YADP;AAEE,IAAA,KAAK,EAAE5B,CAAC,CAAC,uBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACkC,UAAN,CAAiBlB,OAJ5B;AAKE,IAAA,SAAS,EAAC,+BALZ;AAME,IAAA,QAAQ,EAAEE,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASGlB,KAAK,CAACkC,UAAN,CAAiBlB,OAAjB,iBACC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,qBADP;AAEE,IAAA,KAAK,EAAEhB,KAAK,CAACkC,UAAN,CAAiBC,QAF1B;AAGE,IAAA,SAAS,EAAC,gCAHZ;AAIE,IAAA,QAAQ,EAAEjB,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAC,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBhB,CAAC,CAAC,0BAAD,CAAtB,CANF,eAOE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAC,GAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqBA,CAAC,CAAC,0BAAD,CAAtB,CAPF,eAQE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BA,CAAC,CAAC,2BAAD,CAA9B,CARF,CADF,eAWE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,iBADP;AAEE,IAAA,KAAK,EAAEA,CAAC,CAAC,iBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACkC,UAAN,CAAiBE,iBAJ5B;AAKE,IAAA,SAAS,EAAC,oCALZ;AAME,IAAA,QAAQ,EAAElB,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CAVJ,CATJ,CAVF,eAqDE;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,uCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,CAAC,CAAC,2BAAD,CADJ,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,2BADP;AAEE,IAAA,KAAK,EAAEA,CAAC,CAAC,wBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACqC,oBAAN,CAA2B3B,WAJtC;AAKE,IAAA,SAAS,EAAC,kEALZ;AAME,IAAA,QAAQ,EAAEQ,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eASE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,2BADP;AAEE,IAAA,KAAK,EAAEhB,CAAC,CAAC,6BAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACqC,oBAAN,CAA2BC,MAJtC;AAKE,IAAA,SAAS,EAAC,kEALZ;AAME,IAAA,QAAQ,EAAEpB,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAJF,eAsBE;AAAM,IAAA,SAAS,EAAC,oCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,CAAC,CAAC,wBAAD,CADJ,CAtBF,eAyBE;AAAK,IAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,wBADP;AAEE,IAAA,KAAK,EAAEA,CAAC,CAAC,wBAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACS,iBAAN,CAAwBC,WAJnC;AAKE,IAAA,QAAQ,EAAEV,KAAK,CAACO,iBAAN,KAA4BjB,0BAA0B,CAACkB,iBALnE;AAME,IAAA,SAAS,EAAC,+DANZ;AAOE,IAAA,QAAQ,EAAEU,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAUE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,wBADP;AAEE,IAAA,KAAK,EAAEhB,CAAC,CAAC,6BAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACS,iBAAN,CAAwB6B,MAJnC;AAKE,IAAA,SAAS,EAAC,+DALZ;AAME,IAAA,QAAQ,EAAEpB,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CAzBF,eA4CE;AAAM,IAAA,SAAS,EAAC,oCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,CAAC,CAAC,iCAAD,CADJ,CA5CF,eA+CE,oBAAC,UAAD;AACE,IAAA,IAAI,EAAC,mBADP;AAEE,IAAA,KAAK,EAAEF,KAAK,CAACO,iBAFf;AAGE,IAAA,SAAS,EAAC,oCAHZ;AAIE,IAAA,QAAQ,EAAEW,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,gBAAD;AACE,IAAA,KAAK,EAAEhB,CAAC,CAAC,8BAAD,CADV;AAEE,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFX;AAGE,IAAA,KAAK,EAAEZ,0BAA0B,CAACiD,cAHpC;AAIE,IAAA,SAAS,EAAC,+DAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAYE,oBAAC,gBAAD;AACE,IAAA,KAAK,EAAErC,CAAC,CAAC,4BAAD,CADV;AAEE,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFX;AAGE,IAAA,KAAK,EAAEZ,0BAA0B,CAACkB,iBAHpC;AAIE,IAAA,SAAS,EAAC,+DAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,CA/CF,CArDF,eAwHE;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4CN,CAAC,CAAC,qBAAD,CAA7C,CADF,eAEE,oBAAC,gBAAD;AACE,IAAA,IAAI,EAAC,eADP;AAEE,IAAA,KAAK,EAAEA,CAAC,CAAC,0BAAD,CAFV;AAGE,IAAA,OAAO,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHX;AAIE,IAAA,OAAO,EAAEF,KAAK,CAACwC,QAAN,CAAeC,mCAJ1B;AAKE,IAAA,SAAS,EAAC,2BALZ;AAME,IAAA,QAAQ,EAAEvB,YANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAxHF,CAjCJ,CADF;AAyKD;;AAED,eAAevB,sBAAf","sourcesContent":["import React, { ChangeEvent, Fragment } from \"react\";\r\nimport {\r\n  Radio,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Select,\r\n  MenuItem,\r\n  Switch,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  CourseElement,\r\n  CourseElementProps,\r\n  ElementPropsComponent,\r\n  PageEvaluationProps,\r\n} from \"types\";\r\nimport { EvaluationType, EvaluationQuestionValidate } from \"editor-constants\";\r\nimport { getEvaluationPropsJSON } from \"utils\";\r\nimport BlmStructureSelect, { StructureSelectChangeEvent } from \"components/structures/select\";\r\nimport { BlmEvaluationFeedback, EvaluationFeedbackChangeEvent } from \"components/shared\";\r\nimport { changeKeyMap } from \"./utils\";\r\nimport \"./page-evaluation.scss\";\r\n\r\ninterface CompProps extends ElementPropsComponent<PageEvaluationProps> {\r\n  element: CourseElement;\r\n}\r\n\r\nfunction BlmPageEvaluationProps(props: CompProps) {\r\n  const { element, data, onChange } = props;\r\n  const state = data.evalutionJSON!;\r\n  const { t } = useTranslation(\"properties\");\r\n\r\n  const updateChange = (newData: CourseElementProps<PageEvaluationProps>) => {\r\n    if (onChange) {\r\n      onChange(newData);\r\n    }\r\n  };\r\n\r\n  const updateState = (newState: PageEvaluationProps) => {\r\n    if (newState.question_validate === EvaluationQuestionValidate.OneButtonOfTheEnd) {\r\n      newState.question_feedback.by_question = false;\r\n    }\r\n\r\n    const newData: CourseElementProps<PageEvaluationProps> = {\r\n      ...data,\r\n      isEvaluation: newState.evaluation !== EvaluationType.None,\r\n      hasFeedback: newState.feedback.checked,\r\n      evalutionJSON: newState,\r\n      propsJSON: getEvaluationPropsJSON(newState, data.propsJSON),\r\n    };\r\n\r\n    updateChange(newData);\r\n  };\r\n\r\n  const handleChange = (\r\n    event: ChangeEvent<any> | EvaluationFeedbackChangeEvent | StructureSelectChangeEvent\r\n  ) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\r\n    let newState: PageEvaluationProps | undefined;\r\n\r\n    if (changeKeyMap.hasOwnProperty(name)) {\r\n      const map = changeKeyMap[name];\r\n      const { obj, key } = map;\r\n\r\n      newState = {\r\n        ...state,\r\n        [obj]: {\r\n          ...state[obj],\r\n          [key]: value,\r\n        },\r\n      };\r\n    } else if (name === \"feedback\") {\r\n      const { score, feedback } = value;\r\n\r\n      newState = {\r\n        ...state,\r\n        success_score: score,\r\n        feedback,\r\n      };\r\n    } else {\r\n      newState = {\r\n        ...state,\r\n        [name]: value,\r\n      };\r\n    }\r\n\r\n    if (newState) {\r\n      updateState(newState);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page-evaluation-props-container\">\r\n      <div className=\"evaluation-top-container\">\r\n        <Select\r\n          name=\"evaluation\"\r\n          value={state.evaluation}\r\n          className=\"evaluation-dropdown\"\r\n          onChange={handleChange}\r\n        >\r\n          <MenuItem value={EvaluationType.None}>{t(\"evaluation.list.none\")}</MenuItem>\r\n          <MenuItem value={EvaluationType.Evaluation}>{t(\"tabs.evaluation\")}</MenuItem>\r\n        </Select>\r\n        {state.evaluation === EvaluationType.Evaluation && (\r\n          <Fragment>\r\n            <FormControlLabel\r\n              name=\"related_to\"\r\n              label={t(\"evaluation.related_to\")}\r\n              control={<Checkbox />}\r\n              checked={state.related_to.checked}\r\n              className=\"related-to-lbl\"\r\n              onChange={handleChange}\r\n            />\r\n            {state.related_to.checked && (\r\n              <BlmStructureSelect\r\n                name=\"related_to_value\"\r\n                value={state.related_to.value}\r\n                className=\"related-to-select\"\r\n                onChange={handleChange}\r\n              />\r\n            )}\r\n          </Fragment>\r\n        )}\r\n      </div>\r\n      {state.evaluation !== EvaluationType.None && (\r\n        <Fragment>\r\n          <FormControlLabel\r\n            name=\"save_in_lms\"\r\n            label={t(\"evaluation.save_lms\")}\r\n            control={<Switch />}\r\n            checked={state.save_in_lms}\r\n            disabled={state.evaluation !== EvaluationType.Evaluation}\r\n            className=\"evalutaion-switch-frm-lbl\"\r\n            onChange={handleChange}\r\n          />\r\n          <div className=\"evaluation-fb-quiz-container\">\r\n            <BlmEvaluationFeedback\r\n              element={element}\r\n              score={state.success_score}\r\n              feedback={state.feedback}\r\n              display={state.feedback.display}\r\n              onChange={handleChange}\r\n            />\r\n            {state.evaluation === EvaluationType.Evaluation && (\r\n              <div className=\"retry-quiz-container\">\r\n                <FormControlLabel\r\n                  name=\"retry_quiz\"\r\n                  label={t(\"evaluation.retry_quiz\")}\r\n                  control={<Checkbox />}\r\n                  checked={state.retry_quiz.checked}\r\n                  className=\"evaluation-retry-quiz-frm-lbl\"\r\n                  onChange={handleChange}\r\n                />\r\n                {state.retry_quiz.checked && (\r\n                  <Fragment>\r\n                    <Select\r\n                      name=\"retry_quiz_attempts\"\r\n                      value={state.retry_quiz.attempts}\r\n                      className=\"evaluation-retry-quiz-dropdown\"\r\n                      onChange={handleChange}\r\n                    >\r\n                      <MenuItem value=\"2\">{t(\"evaluation.list.attempt2\")}</MenuItem>\r\n                      <MenuItem value=\"3\">{t(\"evaluation.list.attempt3\")}</MenuItem>\r\n                      <MenuItem value=\"unlimited\">{t(\"evaluation.list.unlimited\")}</MenuItem>\r\n                    </Select>\r\n                    <FormControlLabel\r\n                      name=\"retry_quiz_lock\"\r\n                      label={t(\"evaluation.lock\")}\r\n                      control={<Checkbox />}\r\n                      checked={state.retry_quiz.lock_when_success}\r\n                      className=\"evaluation-retry-quiz-lock-frm-lbl\"\r\n                      onChange={handleChange}\r\n                    />\r\n                  </Fragment>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"evaluation-question-container\">\r\n            <span className=\"evaluation-proposition-feedback-title\">\r\n              {t(\"evaluation.proposition_fb\")}\r\n            </span>\r\n            <div className=\"evaluation-proposition-feedback-group\">\r\n              <FormControlLabel\r\n                name=\"proposition_feedback_opt1\"\r\n                label={t(\"evaluation.by_question\")}\r\n                control={<Checkbox />}\r\n                checked={state.proposition_feedback.by_question}\r\n                className=\"evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n              <FormControlLabel\r\n                name=\"proposition_feedback_opt2\"\r\n                label={t(\"evaluation.in_evaluation_fb\")}\r\n                control={<Checkbox />}\r\n                checked={state.proposition_feedback.global}\r\n                className=\"evaluation-proposition-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <span className=\"evaluation-question-feedback-title\">\r\n              {t(\"evaluation.question_fb\")}\r\n            </span>\r\n            <div className=\"evaluation-question-feedback-group\">\r\n              <FormControlLabel\r\n                name=\"question_feedback_opt1\"\r\n                label={t(\"evaluation.by_question\")}\r\n                control={<Checkbox />}\r\n                checked={state.question_feedback.by_question}\r\n                disabled={state.question_validate === EvaluationQuestionValidate.OneButtonOfTheEnd}\r\n                className=\"evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n              <FormControlLabel\r\n                name=\"question_feedback_opt2\"\r\n                label={t(\"evaluation.in_evaluation_fb\")}\r\n                control={<Checkbox />}\r\n                checked={state.question_feedback.global}\r\n                className=\"evaluation-question-feedback-option mui-radio-form-ctrl-lbl-1\"\r\n                onChange={handleChange}\r\n              />\r\n            </div>\r\n            <span className=\"evaluation-question-validate-title\">\r\n              {t(\"page_evaluation.validate_button\")}\r\n            </span>\r\n            <RadioGroup\r\n              name=\"question_validate\"\r\n              value={state.question_validate}\r\n              className=\"evaluation-question-validate-group\"\r\n              onChange={handleChange}\r\n            >\r\n              <FormControlLabel\r\n                label={t(\"page_evaluation.one_per_ques\")}\r\n                control={<Radio />}\r\n                value={EvaluationQuestionValidate.OnePerQuestion}\r\n                className=\"evaluation-question-validate-option mui-radio-form-ctrl-lbl-1\"\r\n              />\r\n              <FormControlLabel\r\n                label={t(\"page_evaluation.button_end\")}\r\n                control={<Radio />}\r\n                value={EvaluationQuestionValidate.OneButtonOfTheEnd}\r\n                className=\"evaluation-question-validate-option mui-radio-form-ctrl-lbl-1\"\r\n              />\r\n            </RadioGroup>\r\n          </div>\r\n          <div className=\"evaluation-advanced-container\">\r\n            <div className=\"evaluation-advanced-title\">{t(\"evaluation.advanced\")}</div>\r\n            <FormControlLabel\r\n              name=\"advanced_opt1\"\r\n              label={t(\"evaluation.show_complete\")}\r\n              control={<Checkbox />}\r\n              checked={state.advanced.show_as_complete_even_if_no_succeed}\r\n              className=\"mui-radio-form-ctrl-lbl-1\"\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n        </Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BlmPageEvaluationProps;\r\n"]},"metadata":{},"sourceType":"module"}