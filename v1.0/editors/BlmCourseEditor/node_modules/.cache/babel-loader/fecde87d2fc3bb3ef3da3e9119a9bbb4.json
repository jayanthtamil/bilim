{"ast":null,"code":"import i18next from \"i18next\";\nimport { MediaImage, MediaButton, MediaCustom, MediaTarget, ExternalVideo, StandardVideo, MediaSlideshow, MediaSlideshowItem, MediaVideo, MediaFlipCard, SynchroVideo, MediaHotspot360, MediaHotspot, MediaHotspotPlain } from \"types\";\nimport { MediaVariants } from \"editor-constants\";\nimport { createShortUUID, createUUID } from \"utils\";\nimport { isVideoMediaComponent } from \"utils\";\nimport { getRepeaterComponents } from \"./component\";\nexport function getMediaImage(component) {\n  if (isMediaImage(component)) {\n    return component;\n  } else {\n    const image = new MediaImage();\n\n    if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          media,\n          title,\n          caption,\n          description\n        } = item;\n        image.media = media;\n        image.title = title;\n        image.caption = caption;\n        image.description = description;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        out,\n        title,\n        caption,\n        description\n      } = component.value;\n      image.media = out;\n      image.title = title;\n      image.caption = caption;\n      image.description = description;\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      image.media = side.media;\n      image.title = side.title;\n      image.caption = side.caption;\n      image.description = side.description;\n    } else if (isMediaVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      image.title = title;\n      image.caption = caption;\n      image.description = description;\n    } else if (isMediaStandardVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      image.title = title;\n      image.caption = caption;\n      image.description = description;\n    } else if (isMediaHotspot(component)) {\n      const {\n        media\n      } = component.value;\n      image.media = media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Image,\n      value: image\n    };\n  }\n}\nexport function getMediaSlideshow(component) {\n  if (isMediaSlideshow(component)) {\n    return component;\n  } else {\n    const slideshow = new MediaSlideshow();\n    const item = new MediaSlideshowItem();\n    item.id = createUUID();\n    slideshow.items = [item];\n\n    if (isMediaImage(component)) {\n      const {\n        media,\n        title,\n        caption,\n        description\n      } = component.value;\n      item.media = media;\n      item.title = title;\n      item.caption = caption;\n      item.description = description;\n    } else if (isMediaButton(component)) {\n      const {\n        out,\n        title,\n        caption,\n        description\n      } = component.value;\n      item.media = out;\n      item.title = title;\n      item.caption = caption;\n      item.description = description;\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      item.media = side.media;\n      item.title = side.title;\n      item.caption = side.caption;\n      item.description = side.description;\n    } else if (isMediaVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      item.title = title;\n      item.caption = caption;\n      item.description = description;\n    } else if (isMediaStandardVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      item.title = title;\n      item.caption = caption;\n      item.description = description;\n    } else if (isMediaHotspot(component)) {\n      const {\n        media\n      } = component.value;\n      item.media = media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Slideshow,\n      value: slideshow\n    };\n  }\n}\nexport function getMediaButton(component) {\n  if (isMediaButton(component)) {\n    return component;\n  } else {\n    const button = new MediaButton();\n\n    if (isMediaImage(component)) {\n      const {\n        media,\n        title,\n        caption,\n        description\n      } = component.value;\n      button.out = media;\n      button.title = title;\n      button.caption = caption;\n      button.description = description;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          media,\n          title,\n          caption,\n          description\n        } = item;\n        button.out = media;\n        button.title = title;\n        button.caption = caption;\n        button.description = description;\n      }\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      button.out = side.media;\n      button.title = side.title;\n      button.caption = side.caption;\n      button.description = side.description;\n      button.label = side.label;\n      button.number = side.number;\n      button.duration = side.duration;\n    } else if (isMediaVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      button.title = title;\n      button.caption = caption;\n      button.description = description;\n    } else if (isMediaStandardVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      button.title = title;\n      button.caption = caption;\n      button.description = description;\n    } else if (isMediaHotspot(component)) {\n      const {\n        media\n      } = component.value;\n      button.out = media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Button,\n      value: button\n    };\n  }\n}\nexport function getMediaFlipCard(component) {\n  if (isMediaFlipCard(component)) {\n    return component;\n  } else {\n    const flipcard = new MediaFlipCard();\n    const {\n      recto\n    } = flipcard;\n\n    if (isMediaImage(component)) {\n      const {\n        media,\n        title,\n        caption,\n        description\n      } = component.value;\n      recto.media = media;\n      recto.title = title;\n      recto.caption = caption;\n      recto.description = description;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          media,\n          title,\n          caption,\n          description\n        } = item;\n        recto.media = media;\n        recto.title = title;\n        recto.caption = caption;\n        recto.description = description;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        out,\n        title,\n        description,\n        caption,\n        label,\n        number,\n        duration\n      } = component.value;\n      recto.media = out;\n      recto.title = title;\n      recto.caption = caption;\n      recto.description = description;\n      recto.label = label;\n      recto.number = number;\n      recto.duration = duration;\n    } else if (isMediaVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      recto.title = title;\n      recto.caption = caption;\n      recto.description = description;\n    } else if (isMediaStandardVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      recto.title = title;\n      recto.caption = caption;\n      recto.description = description;\n    } else if (isMediaHotspot(component)) {\n      const {\n        media\n      } = component.value;\n      recto.media = media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.FlipCard,\n      value: flipcard\n    };\n  }\n}\nexport function getMediaCustom(component) {\n  if (isMediaCustom(component)) {\n    return component;\n  } else {\n    const custom = new MediaCustom();\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Custom,\n      value: custom\n    };\n  }\n}\nexport function getMediaTarget(component, template) {\n  if (isMediaTarget(component)) {\n    return component;\n  } else {\n    const len = template ? getMediaTargets(template).length : 0;\n    const target = new MediaTarget();\n    target.name = `${i18next.t(\"utils:media.target\")}` + (len + 1);\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Target,\n      value: target\n    };\n  }\n}\nexport function getMediaVideo(component) {\n  if (isMediaVideo(component) || isMediaExternalVideo(component) || isMediaStandardVideo(component)) {\n    return component;\n  } else {\n    const video = new MediaVideo();\n\n    if (isMediaImage(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      video.title = title;\n      video.caption = caption;\n      video.description = description;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          title,\n          caption,\n          description\n        } = item;\n        video.title = title;\n        video.caption = caption;\n        video.description = description;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      video.title = title;\n      video.caption = caption;\n      video.description = description;\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      video.title = side.title;\n      video.caption = side.caption;\n      video.description = side.description;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Video,\n      value: video\n    };\n  }\n}\nexport function getMediaExternalVideo(component) {\n  if (isMediaExternalVideo(component)) {\n    return component;\n  } else {\n    const video = new ExternalVideo();\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.VideoExternal,\n      value: video\n    };\n  }\n}\nexport function getMediaStandardVideo(component) {\n  if (isMediaStandardVideo(component)) {\n    return component;\n  } else {\n    const video = new StandardVideo();\n\n    if (isMediaImage(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      video.title = title;\n      video.caption = caption;\n      video.description = description;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          title,\n          caption,\n          description\n        } = item;\n        video.title = title;\n        video.caption = caption;\n        video.description = description;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      video.title = title;\n      video.caption = caption;\n      video.description = description;\n    } else if (isMediaVideo(component)) {\n      const {\n        title,\n        caption,\n        description\n      } = component.value;\n      video.title = title;\n      video.caption = caption;\n      video.description = description;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.VideoStandard,\n      value: video\n    };\n  }\n}\nexport function getMediaSynchroVideo(component) {\n  if (isMediaSynchroVideo(component)) {\n    return component;\n  } else {\n    const synchro = new SynchroVideo();\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.SynchroVideo,\n      value: synchro\n    };\n  }\n}\nexport function getMediaHotspotPlain(component) {\n  if (isMediaHotspotPlain(component) || isMediaHotspot(component) || isMediaHotspot360(component)) {\n    return component;\n  } else {\n    const hotspot = new MediaHotspotPlain();\n\n    if (isMediaImage(component)) {\n      const {\n        media\n      } = component.value;\n      hotspot.media = media;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          media\n        } = item;\n        hotspot.media = media;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        out\n      } = component.value;\n      hotspot.media = out;\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      hotspot.media = side.media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.HotspotPlain,\n      value: hotspot\n    };\n  }\n}\nexport function getMediaHotspot(component) {\n  if (isMediaHotspot(component)) {\n    return component;\n  } else {\n    const hotspot = new MediaHotspot();\n\n    if (isMediaImage(component)) {\n      const {\n        media\n      } = component.value;\n      hotspot.media = media;\n    } else if (isMediaSlideshow(component)) {\n      const {\n        items\n      } = component.value;\n      const item = items[0];\n\n      if (item) {\n        const {\n          media\n        } = item;\n        hotspot.media = media;\n      }\n    } else if (isMediaButton(component)) {\n      const {\n        out\n      } = component.value;\n      hotspot.media = out;\n    } else if (isMediaFlipCard(component)) {\n      const {\n        recto,\n        verso\n      } = component.value;\n      const side = recto.media ? recto : verso;\n      hotspot.media = side.media;\n    } else if (isMediaHotspotPlain(component)) {\n      const {\n        media\n      } = component.value;\n      hotspot.media = media;\n    }\n\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Hotspot,\n      value: hotspot\n    };\n  }\n}\nexport function getMediaHotspot360(component) {\n  if (isMediaHotspot360(component)) {\n    return component;\n  } else {\n    const hotspot = new MediaHotspot360();\n    const item = new MediaHotspot();\n    item.id = createShortUUID();\n    item.name = \"360-a\";\n    hotspot.items.push(item);\n    return { ...component,\n      isEdited: false,\n      variant: MediaVariants.Hotspot360,\n      value: hotspot\n    };\n  }\n}\nexport function isMediaImage(component) {\n  return component.variant === MediaVariants.Image && component.value !== undefined;\n}\nexport function isMediaSlideshow(component) {\n  return component.variant === MediaVariants.Slideshow && component.value !== undefined;\n}\nexport function isMediaButton(component) {\n  return component.variant === MediaVariants.Button && component.value !== undefined;\n}\nexport function isMediaFlipCard(component) {\n  return component.variant === MediaVariants.FlipCard && component.value !== undefined;\n}\nexport function isMediaCustom(component) {\n  return component.variant === MediaVariants.Custom && component.value !== undefined;\n}\nexport function isMediaTarget(component) {\n  return component.variant === MediaVariants.Target && component.value !== undefined;\n}\nexport function isMediaVideo(component) {\n  return component.variant === MediaVariants.Video && component.value !== undefined;\n}\nexport function isMediaExternalVideo(component) {\n  return component.variant === MediaVariants.VideoExternal && component.value !== undefined;\n}\nexport function isMediaStandardVideo(component) {\n  return component.variant === MediaVariants.VideoStandard && component.value !== undefined;\n}\nexport function isMediaSynchroVideo(component) {\n  return component.variant === MediaVariants.SynchroVideo && component.value !== undefined;\n}\nexport function isMediaHotspotPlain(component) {\n  return component.variant === MediaVariants.HotspotPlain && component.value !== undefined;\n}\nexport function isMediaHotspot(component) {\n  return component.variant === MediaVariants.Hotspot && component.value !== undefined;\n}\nexport function isMediaHotspot360(component) {\n  return component.variant === MediaVariants.Hotspot360 && component.value !== undefined;\n}\nexport function hasSameHotspotItemStyles(hotspot) {\n  const {\n    items\n  } = hotspot;\n  const first = items[0];\n  return items.every(item => item.style === first.style);\n}\nexport function getMediaVariant(variant) {\n  if (variant === MediaVariants.VideoExternal || variant === MediaVariants.VideoStandard) {\n    return MediaVariants.Video;\n  } else if (variant === MediaVariants.HotspotPlain || variant === MediaVariants.Hotspot360) {\n    return MediaVariants.Hotspot;\n  } else {\n    return variant;\n  }\n}\nexport function getMediaTargets(template) {\n  const {\n    medias,\n    repeater\n  } = template;\n  const arr = [...medias, ...getRepeaterComponents(repeater === null || repeater === void 0 ? void 0 : repeater.medias)];\n  return arr.filter(item => isMediaTarget(item));\n}\nexport function getVideoMarkerTarget(template, value) {\n  const components = template === null || template === void 0 ? void 0 : template.medias.filter(media => media.variant === MediaVariants.VideoStandard);\n  const component = components === null || components === void 0 ? void 0 : components.find((media, ind) => ind + 1 === parseInt(value.video));\n\n  if (component && isVideoMediaComponent(component)) {\n    var _component$value, _component$value$main;\n\n    const marker = component === null || component === void 0 ? void 0 : (_component$value = component.value) === null || _component$value === void 0 ? void 0 : (_component$value$main = _component$value.main) === null || _component$value$main === void 0 ? void 0 : _component$value$main.marker;\n    return marker;\n  }\n}\nexport function isYoutube(url) {\n  const regex = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\n  var matches = url.match(regex);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return false;\n}\nexport function isVimeo(url) {\n  const regex = /^(?:https?:\\/\\/)?(?:www\\.)?(?:vimeo\\.com\\/)([0-9]+)$/;\n  var matches = url.match(regex);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return false;\n}\nexport function mediaDuplicateID(values, element) {\n  let value = values === null || values === void 0 ? void 0 : values.value;\n\n  if (values.variant === MediaVariants.Image) {\n    var _value$media;\n\n    return {\n      parent: element === null || element === void 0 ? void 0 : element.id,\n      action: \"duplicate\",\n      mediatype: \"ppimage\",\n      image: value === null || value === void 0 ? void 0 : (_value$media = value.media) === null || _value$media === void 0 ? void 0 : _value$media.id\n    };\n  } else if (values.variant === MediaVariants.Button) {\n    var _value$icon, _value$out, _value$over, _value$click, _value$clickAction, _value$clickAction$va, _value$clickAction$va2, _value$clickAction2, _value$clickAction2$v, _value$clickAction2$v2, _value$overAction, _value$overAction$val, _value$overAction$val2, _value$overAction2, _value$overAction2$va, _value$overAction2$va2;\n\n    return {\n      parent: element.id,\n      action: \"duplicate\",\n      mediatype: \"button\",\n      icon: value === null || value === void 0 ? void 0 : (_value$icon = value.icon) === null || _value$icon === void 0 ? void 0 : _value$icon.id,\n      out: value === null || value === void 0 ? void 0 : (_value$out = value.out) === null || _value$out === void 0 ? void 0 : _value$out.id,\n      over: value === null || value === void 0 ? void 0 : (_value$over = value.over) === null || _value$over === void 0 ? void 0 : _value$over.id,\n      click: value === null || value === void 0 ? void 0 : (_value$click = value.click) === null || _value$click === void 0 ? void 0 : _value$click.id,\n      clickAction: (value === null || value === void 0 ? void 0 : (_value$clickAction = value.clickAction) === null || _value$clickAction === void 0 ? void 0 : (_value$clickAction$va = _value$clickAction.value) === null || _value$clickAction$va === void 0 ? void 0 : (_value$clickAction$va2 = _value$clickAction$va.background) === null || _value$clickAction$va2 === void 0 ? void 0 : _value$clickAction$va2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$clickAction2 = value.clickAction) === null || _value$clickAction2 === void 0 ? void 0 : (_value$clickAction2$v = _value$clickAction2.value) === null || _value$clickAction2$v === void 0 ? void 0 : (_value$clickAction2$v2 = _value$clickAction2$v.background) === null || _value$clickAction2$v2 === void 0 ? void 0 : _value$clickAction2$v2.id}` : \"\",\n      overAction: (value === null || value === void 0 ? void 0 : (_value$overAction = value.overAction) === null || _value$overAction === void 0 ? void 0 : (_value$overAction$val = _value$overAction.value) === null || _value$overAction$val === void 0 ? void 0 : (_value$overAction$val2 = _value$overAction$val.background) === null || _value$overAction$val2 === void 0 ? void 0 : _value$overAction$val2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$overAction2 = value.overAction) === null || _value$overAction2 === void 0 ? void 0 : (_value$overAction2$va = _value$overAction2.value) === null || _value$overAction2$va === void 0 ? void 0 : (_value$overAction2$va2 = _value$overAction2$va.background) === null || _value$overAction2$va2 === void 0 ? void 0 : _value$overAction2$va2.id}` : \"\"\n    };\n  } else if (values.variant === MediaVariants.FlipCard) {\n    var _value$recto, _value$recto$media, _value$recto2, _value$recto2$icon, _value$verso, _value$verso$media, _value$verso2, _value$verso2$icon, _value$clickAction3, _value$clickAction3$v, _value$clickAction3$v2, _value$clickAction4, _value$clickAction4$v, _value$clickAction4$v2, _value$overAction3, _value$overAction3$va, _value$overAction3$va2, _value$overAction4, _value$overAction4$va, _value$overAction4$va2;\n\n    return {\n      parent: element.id,\n      action: \"duplicate\",\n      mediatype: \"flipcard\",\n      recto: value === null || value === void 0 ? void 0 : (_value$recto = value.recto) === null || _value$recto === void 0 ? void 0 : (_value$recto$media = _value$recto.media) === null || _value$recto$media === void 0 ? void 0 : _value$recto$media.id,\n      recto_icon: value === null || value === void 0 ? void 0 : (_value$recto2 = value.recto) === null || _value$recto2 === void 0 ? void 0 : (_value$recto2$icon = _value$recto2.icon) === null || _value$recto2$icon === void 0 ? void 0 : _value$recto2$icon.id,\n      verso: value === null || value === void 0 ? void 0 : (_value$verso = value.verso) === null || _value$verso === void 0 ? void 0 : (_value$verso$media = _value$verso.media) === null || _value$verso$media === void 0 ? void 0 : _value$verso$media.id,\n      verso_icon: value === null || value === void 0 ? void 0 : (_value$verso2 = value.verso) === null || _value$verso2 === void 0 ? void 0 : (_value$verso2$icon = _value$verso2.icon) === null || _value$verso2$icon === void 0 ? void 0 : _value$verso2$icon.id,\n      clickAction: (value === null || value === void 0 ? void 0 : (_value$clickAction3 = value.clickAction) === null || _value$clickAction3 === void 0 ? void 0 : (_value$clickAction3$v = _value$clickAction3.value) === null || _value$clickAction3$v === void 0 ? void 0 : (_value$clickAction3$v2 = _value$clickAction3$v.background) === null || _value$clickAction3$v2 === void 0 ? void 0 : _value$clickAction3$v2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$clickAction4 = value.clickAction) === null || _value$clickAction4 === void 0 ? void 0 : (_value$clickAction4$v = _value$clickAction4.value) === null || _value$clickAction4$v === void 0 ? void 0 : (_value$clickAction4$v2 = _value$clickAction4$v.background) === null || _value$clickAction4$v2 === void 0 ? void 0 : _value$clickAction4$v2.id}` : \"\",\n      overAction: (value === null || value === void 0 ? void 0 : (_value$overAction3 = value.overAction) === null || _value$overAction3 === void 0 ? void 0 : (_value$overAction3$va = _value$overAction3.value) === null || _value$overAction3$va === void 0 ? void 0 : (_value$overAction3$va2 = _value$overAction3$va.background) === null || _value$overAction3$va2 === void 0 ? void 0 : _value$overAction3$va2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$overAction4 = value.overAction) === null || _value$overAction4 === void 0 ? void 0 : (_value$overAction4$va = _value$overAction4.value) === null || _value$overAction4$va === void 0 ? void 0 : (_value$overAction4$va2 = _value$overAction4$va.background) === null || _value$overAction4$va2 === void 0 ? void 0 : _value$overAction4$va2.id}` : \"\"\n    };\n  }\n}\nexport function buttonDuplicateID(values, element) {\n  var _value$inline, _value$clickAction5, _value$clickAction5$v, _value$clickAction5$v2, _value$clickAction6, _value$clickAction6$v, _value$clickAction6$v2, _value$overAction5, _value$overAction5$va, _value$overAction5$va2, _value$overAction6, _value$overAction6$va, _value$overAction6$va2;\n\n  let value = values === null || values === void 0 ? void 0 : values.value;\n  return {\n    parent: element.id,\n    action: \"duplicate\",\n    mediatype: \"regularButton\",\n    icon: value === null || value === void 0 ? void 0 : (_value$inline = value.inline) === null || _value$inline === void 0 ? void 0 : _value$inline.id,\n    clickAction: (value === null || value === void 0 ? void 0 : (_value$clickAction5 = value.clickAction) === null || _value$clickAction5 === void 0 ? void 0 : (_value$clickAction5$v = _value$clickAction5.value) === null || _value$clickAction5$v === void 0 ? void 0 : (_value$clickAction5$v2 = _value$clickAction5$v.background) === null || _value$clickAction5$v2 === void 0 ? void 0 : _value$clickAction5$v2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$clickAction6 = value.clickAction) === null || _value$clickAction6 === void 0 ? void 0 : (_value$clickAction6$v = _value$clickAction6.value) === null || _value$clickAction6$v === void 0 ? void 0 : (_value$clickAction6$v2 = _value$clickAction6$v.background) === null || _value$clickAction6$v2 === void 0 ? void 0 : _value$clickAction6$v2.id}` : \"\",\n    overAction: (value === null || value === void 0 ? void 0 : (_value$overAction5 = value.overAction) === null || _value$overAction5 === void 0 ? void 0 : (_value$overAction5$va = _value$overAction5.value) === null || _value$overAction5$va === void 0 ? void 0 : (_value$overAction5$va2 = _value$overAction5$va.background) === null || _value$overAction5$va2 === void 0 ? void 0 : _value$overAction5$va2.id) ? `replacebackground-${value === null || value === void 0 ? void 0 : (_value$overAction6 = value.overAction) === null || _value$overAction6 === void 0 ? void 0 : (_value$overAction6$va = _value$overAction6.value) === null || _value$overAction6$va === void 0 ? void 0 : (_value$overAction6$va2 = _value$overAction6$va.background) === null || _value$overAction6$va2 === void 0 ? void 0 : _value$overAction6$va2.id}` : \"\"\n  };\n}\nexport function soundDuplicateID(values, element) {\n  var _value$media2, _value$image, _value$media3, _value$media3$marker, _value$media4, _value$media4$subtitl;\n\n  let value = values === null || values === void 0 ? void 0 : values.value;\n  return {\n    parent: element.id,\n    action: \"duplicate\",\n    mediatype: \"pp_sound\",\n    sound: value === null || value === void 0 ? void 0 : (_value$media2 = value.media) === null || _value$media2 === void 0 ? void 0 : _value$media2.id,\n    thumbnail: value === null || value === void 0 ? void 0 : (_value$image = value.image) === null || _value$image === void 0 ? void 0 : _value$image.id,\n    marker: value === null || value === void 0 ? void 0 : (_value$media3 = value.media) === null || _value$media3 === void 0 ? void 0 : (_value$media3$marker = _value$media3.marker) === null || _value$media3$marker === void 0 ? void 0 : _value$media3$marker.id,\n    subtitle: value === null || value === void 0 ? void 0 : (_value$media4 = value.media) === null || _value$media4 === void 0 ? void 0 : (_value$media4$subtitl = _value$media4.subtitle) === null || _value$media4$subtitl === void 0 ? void 0 : _value$media4$subtitl.id\n  };\n}","map":{"version":3,"sources":["C:/Users/Rajesh/Downloads/bilim (2)/bilim/v1.0/editors/BlmCourseEditor/src/utils/editor/media.ts"],"names":["i18next","MediaImage","MediaButton","MediaCustom","MediaTarget","ExternalVideo","StandardVideo","MediaSlideshow","MediaSlideshowItem","MediaVideo","MediaFlipCard","SynchroVideo","MediaHotspot360","MediaHotspot","MediaHotspotPlain","MediaVariants","createShortUUID","createUUID","isVideoMediaComponent","getRepeaterComponents","getMediaImage","component","isMediaImage","image","isMediaSlideshow","items","value","item","media","title","caption","description","isMediaButton","out","isMediaFlipCard","recto","verso","side","isMediaVideo","isMediaStandardVideo","isMediaHotspot","isEdited","variant","Image","getMediaSlideshow","slideshow","id","Slideshow","getMediaButton","button","label","number","duration","Button","getMediaFlipCard","flipcard","FlipCard","getMediaCustom","isMediaCustom","custom","Custom","getMediaTarget","template","isMediaTarget","len","getMediaTargets","length","target","name","t","Target","getMediaVideo","isMediaExternalVideo","video","Video","getMediaExternalVideo","VideoExternal","getMediaStandardVideo","VideoStandard","getMediaSynchroVideo","isMediaSynchroVideo","synchro","getMediaHotspotPlain","isMediaHotspotPlain","isMediaHotspot360","hotspot","HotspotPlain","getMediaHotspot","Hotspot","getMediaHotspot360","push","Hotspot360","undefined","hasSameHotspotItemStyles","first","every","style","getMediaVariant","medias","repeater","arr","filter","getVideoMarkerTarget","components","find","ind","parseInt","marker","main","isYoutube","url","regex","matches","match","isVimeo","mediaDuplicateID","values","element","parent","action","mediatype","icon","over","click","clickAction","background","overAction","recto_icon","verso_icon","buttonDuplicateID","inline","soundDuplicateID","sound","thumbnail","subtitle"],"mappings":"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","sourcesContent":["import i18next from \"i18next\";\r\n\r\nimport {\r\n  MediaComponent,\r\n  MediaImage,\r\n  MediaButton,\r\n  MediaCustom,\r\n  MediaTarget,\r\n  ContentTemplate,\r\n  ExternalVideo,\r\n  StandardVideo,\r\n  MediaSlideshow,\r\n  MediaSlideshowItem,\r\n  MediaVideo,\r\n  MediaFlipCard,\r\n  SynchroVideo,\r\n  MediaHotspot360,\r\n  MediaHotspot,\r\n  MediaHotspotPlain,\r\n  CourseElement,\r\n  ButtonComponent,\r\n  ButtonValue,\r\n  SoundComponent,\r\n  SoundValue,\r\n} from \"types\";\r\nimport { MediaVariants } from \"editor-constants\";\r\nimport { createShortUUID, createUUID } from \"utils\";\r\nimport { isVideoMediaComponent } from \"utils\";\r\n\r\nimport { getRepeaterComponents } from \"./component\";\r\n\r\nexport function getMediaImage(component: MediaComponent) {\r\n  if (isMediaImage(component)) {\r\n    return component;\r\n  } else {\r\n    const image = new MediaImage();\r\n\r\n    if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { media, title, caption, description } = item;\r\n\r\n        image.media = media;\r\n        image.title = title;\r\n        image.caption = caption;\r\n        image.description = description;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { out, title, caption, description } = component.value;\r\n\r\n      image.media = out;\r\n      image.title = title;\r\n      image.caption = caption;\r\n      image.description = description;\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      image.media = side.media;\r\n      image.title = side.title;\r\n      image.caption = side.caption;\r\n      image.description = side.description;\r\n    } else if (isMediaVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      image.title = title;\r\n      image.caption = caption;\r\n      image.description = description;\r\n    } else if (isMediaStandardVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      image.title = title;\r\n      image.caption = caption;\r\n      image.description = description;\r\n    } else if (isMediaHotspot(component)) {\r\n      const { media } = component.value;\r\n\r\n      image.media = media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Image,\r\n      value: image,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaSlideshow(component: MediaComponent) {\r\n  if (isMediaSlideshow(component)) {\r\n    return component;\r\n  } else {\r\n    const slideshow = new MediaSlideshow();\r\n    const item = new MediaSlideshowItem();\r\n\r\n    item.id = createUUID();\r\n    slideshow.items = [item];\r\n\r\n    if (isMediaImage(component)) {\r\n      const { media, title, caption, description } = component.value;\r\n\r\n      item.media = media;\r\n      item.title = title;\r\n      item.caption = caption;\r\n      item.description = description;\r\n    } else if (isMediaButton(component)) {\r\n      const { out, title, caption, description } = component.value;\r\n\r\n      item.media = out;\r\n      item.title = title;\r\n      item.caption = caption;\r\n      item.description = description;\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      item.media = side.media;\r\n      item.title = side.title;\r\n      item.caption = side.caption;\r\n      item.description = side.description;\r\n    } else if (isMediaVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      item.title = title;\r\n      item.caption = caption;\r\n      item.description = description;\r\n    } else if (isMediaStandardVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      item.title = title;\r\n      item.caption = caption;\r\n      item.description = description;\r\n    } else if (isMediaHotspot(component)) {\r\n      const { media } = component.value;\r\n\r\n      item.media = media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Slideshow,\r\n      value: slideshow,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaButton(component: MediaComponent) {\r\n  if (isMediaButton(component)) {\r\n    return component;\r\n  } else {\r\n    const button = new MediaButton();\r\n\r\n    if (isMediaImage(component)) {\r\n      const { media, title, caption, description } = component.value;\r\n\r\n      button.out = media;\r\n      button.title = title;\r\n      button.caption = caption;\r\n      button.description = description;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { media, title, caption, description } = item;\r\n\r\n        button.out = media;\r\n        button.title = title;\r\n        button.caption = caption;\r\n        button.description = description;\r\n      }\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      button.out = side.media;\r\n      button.title = side.title;\r\n      button.caption = side.caption;\r\n      button.description = side.description;\r\n      button.label = side.label;\r\n      button.number = side.number;\r\n      button.duration = side.duration;\r\n    } else if (isMediaVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      button.title = title;\r\n      button.caption = caption;\r\n      button.description = description;\r\n    } else if (isMediaStandardVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      button.title = title;\r\n      button.caption = caption;\r\n      button.description = description;\r\n    } else if (isMediaHotspot(component)) {\r\n      const { media } = component.value;\r\n\r\n      button.out = media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Button,\r\n      value: button,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaFlipCard(component: MediaComponent) {\r\n  if (isMediaFlipCard(component)) {\r\n    return component;\r\n  } else {\r\n    const flipcard = new MediaFlipCard();\r\n    const { recto } = flipcard;\r\n\r\n    if (isMediaImage(component)) {\r\n      const { media, title, caption, description } = component.value;\r\n\r\n      recto.media = media;\r\n      recto.title = title;\r\n      recto.caption = caption;\r\n      recto.description = description;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { media, title, caption, description } = item;\r\n\r\n        recto.media = media;\r\n        recto.title = title;\r\n        recto.caption = caption;\r\n        recto.description = description;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { out, title, description, caption, label, number, duration } = component.value;\r\n\r\n      recto.media = out;\r\n      recto.title = title;\r\n      recto.caption = caption;\r\n      recto.description = description;\r\n      recto.label = label;\r\n      recto.number = number;\r\n      recto.duration = duration;\r\n    } else if (isMediaVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      recto.title = title;\r\n      recto.caption = caption;\r\n      recto.description = description;\r\n    } else if (isMediaStandardVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      recto.title = title;\r\n      recto.caption = caption;\r\n      recto.description = description;\r\n    } else if (isMediaHotspot(component)) {\r\n      const { media } = component.value;\r\n\r\n      recto.media = media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.FlipCard,\r\n      value: flipcard,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaCustom(component: MediaComponent) {\r\n  if (isMediaCustom(component)) {\r\n    return component;\r\n  } else {\r\n    const custom = new MediaCustom();\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Custom,\r\n      value: custom,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaTarget(component: MediaComponent, template?: ContentTemplate) {\r\n  if (isMediaTarget(component)) {\r\n    return component;\r\n  } else {\r\n    const len = template ? getMediaTargets(template).length : 0;\r\n    const target = new MediaTarget();\r\n    target.name = `${i18next.t(\"utils:media.target\")}` + (len + 1);\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Target,\r\n      value: target,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaVideo(component: MediaComponent) {\r\n  if (\r\n    isMediaVideo(component) ||\r\n    isMediaExternalVideo(component) ||\r\n    isMediaStandardVideo(component)\r\n  ) {\r\n    return component;\r\n  } else {\r\n    const video = new MediaVideo();\r\n\r\n    if (isMediaImage(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      video.title = title;\r\n      video.caption = caption;\r\n      video.description = description;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { title, caption, description } = item;\r\n\r\n        video.title = title;\r\n        video.caption = caption;\r\n        video.description = description;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      video.title = title;\r\n      video.caption = caption;\r\n      video.description = description;\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      video.title = side.title;\r\n      video.caption = side.caption;\r\n      video.description = side.description;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Video,\r\n      value: video,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaExternalVideo(component: MediaComponent) {\r\n  if (isMediaExternalVideo(component)) {\r\n    return component;\r\n  } else {\r\n    const video = new ExternalVideo();\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.VideoExternal,\r\n      value: video,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaStandardVideo(component: MediaComponent) {\r\n  if (isMediaStandardVideo(component)) {\r\n    return component;\r\n  } else {\r\n    const video = new StandardVideo();\r\n\r\n    if (isMediaImage(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      video.title = title;\r\n      video.caption = caption;\r\n      video.description = description;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { title, caption, description } = item;\r\n\r\n        video.title = title;\r\n        video.caption = caption;\r\n        video.description = description;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      video.title = title;\r\n      video.caption = caption;\r\n      video.description = description;\r\n    } else if (isMediaVideo(component)) {\r\n      const { title, caption, description } = component.value;\r\n\r\n      video.title = title;\r\n      video.caption = caption;\r\n      video.description = description;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.VideoStandard,\r\n      value: video,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaSynchroVideo(component: MediaComponent) {\r\n  if (isMediaSynchroVideo(component)) {\r\n    return component;\r\n  } else {\r\n    const synchro = new SynchroVideo();\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.SynchroVideo,\r\n      value: synchro,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaHotspotPlain(component: MediaComponent) {\r\n  if (isMediaHotspotPlain(component) || isMediaHotspot(component) || isMediaHotspot360(component)) {\r\n    return component;\r\n  } else {\r\n    const hotspot = new MediaHotspotPlain();\r\n\r\n    if (isMediaImage(component)) {\r\n      const { media } = component.value;\r\n\r\n      hotspot.media = media;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { media } = item;\r\n\r\n        hotspot.media = media;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { out } = component.value;\r\n\r\n      hotspot.media = out;\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      hotspot.media = side.media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.HotspotPlain,\r\n      value: hotspot,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaHotspot(component: MediaComponent) {\r\n  if (isMediaHotspot(component)) {\r\n    return component;\r\n  } else {\r\n    const hotspot = new MediaHotspot();\r\n\r\n    if (isMediaImage(component)) {\r\n      const { media } = component.value;\r\n\r\n      hotspot.media = media;\r\n    } else if (isMediaSlideshow(component)) {\r\n      const { items } = component.value;\r\n      const item = items[0];\r\n\r\n      if (item) {\r\n        const { media } = item;\r\n\r\n        hotspot.media = media;\r\n      }\r\n    } else if (isMediaButton(component)) {\r\n      const { out } = component.value;\r\n\r\n      hotspot.media = out;\r\n    } else if (isMediaFlipCard(component)) {\r\n      const { recto, verso } = component.value;\r\n      const side = recto.media ? recto : verso;\r\n\r\n      hotspot.media = side.media;\r\n    } else if (isMediaHotspotPlain(component)) {\r\n      const { media } = component.value;\r\n\r\n      hotspot.media = media;\r\n    }\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Hotspot,\r\n      value: hotspot,\r\n    };\r\n  }\r\n}\r\n\r\nexport function getMediaHotspot360(component: MediaComponent) {\r\n  if (isMediaHotspot360(component)) {\r\n    return component;\r\n  } else {\r\n    const hotspot = new MediaHotspot360();\r\n    const item = new MediaHotspot();\r\n    item.id = createShortUUID();\r\n    item.name = \"360-a\";\r\n\r\n    hotspot.items.push(item);\r\n\r\n    return {\r\n      ...component,\r\n      isEdited: false,\r\n      variant: MediaVariants.Hotspot360,\r\n      value: hotspot,\r\n    };\r\n  }\r\n}\r\n\r\nexport function isMediaImage(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaImage } {\r\n  return component.variant === MediaVariants.Image && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaSlideshow(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaSlideshow } {\r\n  return component.variant === MediaVariants.Slideshow && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaButton(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaButton } {\r\n  return component.variant === MediaVariants.Button && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaFlipCard(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaFlipCard } {\r\n  return component.variant === MediaVariants.FlipCard && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaCustom(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaCustom } {\r\n  return component.variant === MediaVariants.Custom && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaTarget(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaTarget } {\r\n  return component.variant === MediaVariants.Target && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaVideo(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaVideo } {\r\n  return component.variant === MediaVariants.Video && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaExternalVideo(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: ExternalVideo } {\r\n  return component.variant === MediaVariants.VideoExternal && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaStandardVideo(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: StandardVideo } {\r\n  return component.variant === MediaVariants.VideoStandard && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaSynchroVideo(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: SynchroVideo } {\r\n  return component.variant === MediaVariants.SynchroVideo && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaHotspotPlain(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaHotspotPlain } {\r\n  return component.variant === MediaVariants.HotspotPlain && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaHotspot(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaHotspot } {\r\n  return component.variant === MediaVariants.Hotspot && component.value !== undefined;\r\n}\r\n\r\nexport function isMediaHotspot360(\r\n  component: MediaComponent\r\n): component is MediaComponent & { value: MediaHotspot360 } {\r\n  return component.variant === MediaVariants.Hotspot360 && component.value !== undefined;\r\n}\r\n\r\nexport function hasSameHotspotItemStyles(hotspot: MediaHotspot) {\r\n  const { items } = hotspot;\r\n  const first = items[0];\r\n\r\n  return items.every((item) => item.style === first.style);\r\n}\r\n\r\nexport function getMediaVariant(variant: MediaVariants) {\r\n  if (variant === MediaVariants.VideoExternal || variant === MediaVariants.VideoStandard) {\r\n    return MediaVariants.Video;\r\n  } else if (variant === MediaVariants.HotspotPlain || variant === MediaVariants.Hotspot360) {\r\n    return MediaVariants.Hotspot;\r\n  } else {\r\n    return variant;\r\n  }\r\n}\r\n\r\nexport function getMediaTargets(template: ContentTemplate) {\r\n  const { medias, repeater } = template;\r\n  const arr = [...medias, ...getRepeaterComponents(repeater?.medias)];\r\n\r\n  return arr.filter((item) => isMediaTarget(item)) as (MediaComponent & {\r\n    value: MediaTarget;\r\n  })[];\r\n}\r\n\r\nexport function getVideoMarkerTarget(template: ContentTemplate, value: any) {\r\n  const components = template?.medias.filter(\r\n    (media: MediaComponent) => media.variant === MediaVariants.VideoStandard\r\n  );\r\n\r\n  const component = components?.find(\r\n    (media: MediaComponent, ind: number) => ind + 1 === parseInt(value.video)\r\n  );\r\n\r\n  if (component && isVideoMediaComponent(component)) {\r\n    const marker = component?.value?.main?.marker;\r\n\r\n    return marker;\r\n  }\r\n}\r\n\r\nexport function isYoutube(url: string) {\r\n  const regex =\r\n    /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n  var matches = url.match(regex);\r\n\r\n  if (matches) {\r\n    return matches[1];\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function isVimeo(url: string) {\r\n  const regex = /^(?:https?:\\/\\/)?(?:www\\.)?(?:vimeo\\.com\\/)([0-9]+)$/;\r\n  var matches = url.match(regex);\r\n\r\n  if (matches) {\r\n    return matches[1];\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nexport function mediaDuplicateID(values: MediaComponent, element: CourseElement) {\r\n  let value: MediaImage | any = values?.value;\r\n  if (values.variant === MediaVariants.Image) {\r\n    return {\r\n      parent: element?.id,\r\n      action: \"duplicate\",\r\n      mediatype: \"ppimage\",\r\n      image: value?.media?.id,\r\n    };\r\n  } else if (values.variant === MediaVariants.Button) {\r\n    return {\r\n      parent: element.id,\r\n      action: \"duplicate\",\r\n      mediatype: \"button\",\r\n      icon: value?.icon?.id,\r\n      out: value?.out?.id,\r\n      over: value?.over?.id,\r\n      click: value?.click?.id,\r\n      clickAction: value?.clickAction?.value?.background?.id\r\n        ? `replacebackground-${value?.clickAction?.value?.background?.id}`\r\n        : \"\",\r\n      overAction: value?.overAction?.value?.background?.id\r\n        ? `replacebackground-${value?.overAction?.value?.background?.id}`\r\n        : \"\",\r\n    };\r\n  } else if (values.variant === MediaVariants.FlipCard) {\r\n    return {\r\n      parent: element.id,\r\n      action: \"duplicate\",\r\n      mediatype: \"flipcard\",\r\n      recto: value?.recto?.media?.id,\r\n      recto_icon: value?.recto?.icon?.id,\r\n      verso: value?.verso?.media?.id,\r\n      verso_icon: value?.verso?.icon?.id,\r\n      clickAction: value?.clickAction?.value?.background?.id\r\n        ? `replacebackground-${value?.clickAction?.value?.background?.id}`\r\n        : \"\",\r\n      overAction: value?.overAction?.value?.background?.id\r\n        ? `replacebackground-${value?.overAction?.value?.background?.id}`\r\n        : \"\",\r\n    };\r\n  }\r\n}\r\nexport function buttonDuplicateID(values: ButtonComponent, element: CourseElement) {\r\n  let value: ButtonValue | any = values?.value;\r\n  return {\r\n    parent: element.id,\r\n    action: \"duplicate\",\r\n    mediatype: \"regularButton\",\r\n    icon: value?.inline?.id,\r\n    clickAction: value?.clickAction?.value?.background?.id\r\n      ? `replacebackground-${value?.clickAction?.value?.background?.id}`\r\n      : \"\",\r\n    overAction: value?.overAction?.value?.background?.id\r\n      ? `replacebackground-${value?.overAction?.value?.background?.id}`\r\n      : \"\",\r\n  };\r\n}\r\nexport function soundDuplicateID(values: SoundComponent, element: CourseElement) {\r\n  let value: SoundValue = values?.value;\r\n  return {\r\n    parent: element.id,\r\n    action: \"duplicate\",\r\n    mediatype: \"pp_sound\",\r\n    sound: value?.media?.id,\r\n    thumbnail:  value?.image?.id,\r\n    marker: value?.media?.marker?.id,\r\n    subtitle: value?.media?.subtitle?.id,\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}