!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["wavesurfer-js"]=e():t["wavesurfer-js"]=e()}(self,(()=>(()=>{var t={705:(t,e,r)=>{var i=r(639).Symbol;t.exports=i},239:(t,e,r)=>{var i=r(705),n=r(607),a=r(333),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?n(t):a(t)}},561:(t,e,r)=>{var i=r(990),n=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(n,""):t}},957:(t,e,r)=>{var i="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=i},607:(t,e,r)=>{var i=r(705),n=Object.prototype,a=n.hasOwnProperty,o=n.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),r=t[s];try{t[s]=void 0;var i=!0}catch(t){}var n=o.call(t);return i&&(e?t[s]=r:delete t[s]),n}},333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},639:(t,e,r)=>{var i=r(957),n="object"==typeof self&&self&&self.Object===Object&&self,a=i||n||Function("return this")();t.exports=a},990:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},279:(t,e,r)=>{var i=r(218),n=r(771),a=r(841),o=Math.max,s=Math.min;t.exports=function(t,e,r){var h,l,p,c,u,f,d=0,v=!1,m=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function w(e){var r=h,i=l;return h=l=void 0,d=e,c=t.apply(i,r)}function g(t){return d=t,u=setTimeout(x,e),v?w(t):c}function C(t){var r=t-f;return void 0===f||r>=e||r<0||m&&t-d>=p}function x(){var t=n();if(C(t))return b(t);u=setTimeout(x,function(t){var r=e-(t-f);return m?s(r,p-(t-d)):r}(t))}function b(t){return u=void 0,y&&h?w(t):(h=l=void 0,c)}function P(){var t=n(),r=C(t);if(h=arguments,l=this,f=t,r){if(void 0===u)return g(f);if(m)return clearTimeout(u),u=setTimeout(x,e),w(f)}return void 0===u&&(u=setTimeout(x,e)),c}return e=a(e)||0,i(r)&&(v=!!r.leading,p=(m="maxWait"in r)?o(a(r.maxWait)||0,e):p,y="trailing"in r?!!r.trailing:y),P.cancel=function(){void 0!==u&&clearTimeout(u),d=0,h=f=l=u=void 0},P.flush=function(){return void 0===u?c:b(n())},P}},218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},448:(t,e,r)=>{var i=r(239),n=r(5);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==i(t)}},771:(t,e,r)=>{var i=r(639);t.exports=function(){return i.Date.now()}},841:(t,e,r)=>{var i=r(561),n=r(218),a=r(448),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,h=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var r=s.test(t);return r||h.test(t)?l(t.slice(2),r?2:8):o.test(t)?NaN:+t}}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.r(i),r.d(i,{TimelinePlugin:()=>C,default:()=>w});var t=r(279),e=r.n(t),n=function(){function t(){this.handlers=null,this._disabledEventEmissions=[]}return t.prototype.on=function(t,e){var r=this;this.handlers||(this.handlers={});var i=this.handlers[t];return i||(i=this.handlers[t]=[]),i.push(e),{name:t,callback:e,un:function(t,e){return r.un(t,e)}}},t.prototype.un=function(t,e){if(this.handlers){var r,i=this.handlers[t];if(i)if(e)for(r=i.length-1;r>=0;r--)i[r]===e&&i.splice(r,1);else i.length=0}},t.prototype.unAll=function(){this.handlers=null},t.prototype.once=function(t,e){var r=this,i=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];e.apply(r,n),setTimeout((function(){r.un(t,i)}),0)};return this.on(t,i)},t.prototype.setDisabledEventEmissions=function(t){this._disabledEventEmissions=t},t.prototype._isDisabledEventEmission=function(t){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(t)},t.prototype.fireEvent=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(this.handlers&&!this._isDisabledEventEmission(t)){var i=this.handlers[t];i&&i.forEach((function(t){t.apply(void 0,e)}))}},t}();function a(t){var e=o(t),r=function(t){var e=1/0;return Object.values(t).forEach((function(t){t<e&&(e=t)})),e}(t);return-r>e?-r:e}function o(t){var e=-1/0;return Object.values(t).forEach((function(t){t>e&&(e=t)})),e}function s(t,e){return Object.keys(e).forEach((function(r){t.style[r]!==e[r]&&(t.style[r]=e[r])})),t}function h(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p((function(){return t.apply(void 0,e)}))}}var l,p=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return setTimeout(t,1e3/60)}).bind(window),c=(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},l(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const u=function(t){function e(e,r){var i=t.call(this)||this;return i.container=e,i.params=r,i.width=0,i.height=r.height*i.params.pixelRatio,i.lastPos=0,i.wrapper=null,i}return c(e,t),e.prototype.style=function(t,e){return s(t,e)},e.prototype.createWrapper=function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"})},e.prototype.drawPeaks=function(t,e,r,i){this.setWidth(e)||this.clearWave(),this.params.barWidth?this.drawBars(t,0,r,i):this.drawWave(t,0,r,i)},e.prototype.resetScroll=function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},e.prototype.recenter=function(t){var e=this.wrapper.scrollWidth*t;this.recenterOnPosition(e,!0)},e.prototype.recenterOnPosition=function(t,e){var r=this.wrapper.scrollLeft,i=~~(this.wrapper.clientWidth/2),n=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=t-i,o=a-r;if(0!==n){if(!e&&-i<=o&&o<i){var s=this.params.autoCenterRate;s/=i,s*=n,a=r+(o=Math.max(-s,Math.min(s,o)))}(a=Math.max(0,Math.min(n,a)))!==r&&(this.wrapper.scrollLeft=a)}},e.prototype.getScrollX=function(){var t=0;if(this.wrapper){var e=this.params.pixelRatio;if(t=Math.round(this.wrapper.scrollLeft*e),this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*e-this.getWidth());t=Math.min(r,Math.max(0,t))}}return t},e.prototype.getWidth=function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},e.prototype.setWidth=function(t){if(this.width===t)return!1;if(this.width=t,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var e=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:e})}return this.updateSize(),!0},e.prototype.setHeight=function(t){return t!==this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)},e.prototype.progress=function(t){var e=1/this.params.pixelRatio,r=Math.round(t*this.width)*e;if(r<this.lastPos||r-this.lastPos>=e){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var i=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(i,this.params.autoCenterImmediately)}this.updateProgress(r)}},e.prototype.destroy=function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode===this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)},e.prototype.updateCursor=function(){},e.prototype.updateSize=function(){},e.prototype.drawBars=function(t,e,r,i){},e.prototype.drawWave=function(t,e,r,i){},e.prototype.clearWave=function(){},e.prototype.updateProgress=function(t){},e}(n),f=function(){function t(){var t;this.hasProgressCanvas=!1,this.halfPixel=.5,this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=((t=void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_")&&(t="wavesurfer_"),t+Math.random().toString(32).substring(2)),this.canvasContextAttributes={}}return t.prototype.initWave=function(t){this.wave=t,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)},t.prototype.initProgress=function(t){this.progress=t,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)},t.prototype.updateDimensions=function(t,e,r,i){this.start=this.wave.offsetLeft/e||0,this.end=this.start+t/e,this.wave.width=r,this.wave.height=i;var n={width:t+"px"};s(this.wave,n),this.hasProgressCanvas&&(this.progress.width=r,this.progress.height=i,s(this.progress,n))},t.prototype.clearWave=function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)},t.prototype.setFillStyles=function(t,e){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,t),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,e))},t.prototype.getFillStyle=function(t,e){if("string"==typeof e||e instanceof CanvasGradient)return e;var r=t.createLinearGradient(0,0,0,t.canvas.height);return e.forEach((function(t,i){return r.addColorStop(i/e.length,t)})),r},t.prototype.fillRects=function(t,e,r,i,n){this.fillRectToContext(this.waveCtx,t,e,r,i,n),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,t,e,r,i,n)},t.prototype.fillRectToContext=function(t,e,r,i,n,a){t&&(a?this.drawRoundedRect(t,e,r,i,n,a):t.fillRect(e,r,i,n))},t.prototype.drawRoundedRect=function(t,e,r,i,n,a){0!==n&&(n<0&&(r-=n*=-1),t.beginPath(),t.moveTo(e+a,r),t.lineTo(e+i-a,r),t.quadraticCurveTo(e+i,r,e+i,r+a),t.lineTo(e+i,r+n-a),t.quadraticCurveTo(e+i,r+n,e+i-a,r+n),t.lineTo(e+a,r+n),t.quadraticCurveTo(e,r+n,e,r+n-a),t.lineTo(e,r+a),t.quadraticCurveTo(e,r,e+a,r),t.closePath(),t.fill())},t.prototype.drawLines=function(t,e,r,i,n,a){this.drawLineToContext(this.waveCtx,t,e,r,i,n,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,t,e,r,i,n,a)},t.prototype.drawLineToContext=function(t,e,r,i,n,a,o){if(t){var s,h,l,p=e.length/2,c=Math.round(p*this.start),u=c,f=Math.round(p*this.end)+1,d=this.wave.width/(f-u-1),v=i+n,m=r/i;for(t.beginPath(),t.moveTo((u-c)*d,v),t.lineTo((u-c)*d,v-Math.round((e[2*u]||0)/m)),s=u;s<f;s++)h=e[2*s]||0,l=Math.round(h/m),t.lineTo((s-c)*d+this.halfPixel,v-l);for(var y=f-1;y>=u;y--)h=e[2*y+1]||0,l=Math.round(h/m),t.lineTo((y-c)*d+this.halfPixel,v-l);t.lineTo((u-c)*d,v-Math.round((e[2*u+1]||0)/m)),t.closePath(),t.fill()}},t.prototype.destroy=function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null},t}();var d=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();const v=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.maxCanvasWidth=r.maxCanvasWidth,i.maxCanvasElementWidth=Math.round(r.maxCanvasWidth/r.pixelRatio),i.hasProgressCanvas=r.waveColor!==r.progressColor,i.halfPixel=.5/r.pixelRatio,i.canvases=[],i.progressWave=null,i.canvasContextAttributes=r.drawingContextAttributes,i.overlap=2*Math.ceil(r.pixelRatio/2),i.barRadius=r.barRadius||0,i}return d(e,t),e.prototype.init=function(){this.createWrapper(),this.createElements()},e.prototype.createElements=function(){this.progressWave=this.wrapper.appendChild(document.createElement("wave")),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()},e.prototype.updateCursor=function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})},e.prototype.updateSize=function(){for(var t=this,e=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(e/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var i=this.maxCanvasWidth+this.overlap,n=this.canvases.length-1;this.canvases.forEach((function(e,r){r===n&&(i=t.width-t.maxCanvasWidth*n),t.updateDimensions(e,i,t.height),e.clearWave()}))},e.prototype.addCanvas=function(){var t=new f;t.canvasContextAttributes=this.canvasContextAttributes,t.hasProgressCanvas=this.hasProgressCanvas,t.halfPixel=this.halfPixel;var e=this.maxCanvasElementWidth*this.canvases.length,r=this.wrapper.appendChild(document.createElement("canvas"));if(this.style(r,{position:"absolute",zIndex:2,left:e+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),t.initWave(r),this.hasProgressCanvas){var i=this.progressWave.appendChild(document.createElement("canvas"));this.style(i,{position:"absolute",left:e+"px",top:0,bottom:0,height:"100%"}),t.initProgress(i)}this.canvases.push(t)},e.prototype.removeCanvas=function(){var t=this.canvases[this.canvases.length-1];t.wave.parentElement.removeChild(t.wave),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress),t&&(t.destroy(),t=null),this.canvases.pop()},e.prototype.updateDimensions=function(t,e,r){var i=Math.round(e/this.params.pixelRatio),n=Math.round(this.width/this.params.pixelRatio);t.updateDimensions(i,n,e,r),this.style(this.progressWave,{display:"block"})},e.prototype.clearWave=function(){var t=this;h((function(){t.canvases.forEach((function(t){return t.clearWave()}))}))()},e.prototype.drawBars=function(t,e,r,i){var n=this;return this.prepareDraw(t,e,r,i,(function(t){var e=t.absmax,a=t.hasMinVals,o=(t.height,t.offsetY),s=t.halfH,h=t.peaks,l=t.channelIndex;if(void 0!==r)for(var p=a?2:1,c=h.length/p,u=n.params.barWidth*n.params.pixelRatio,f=u+(null===n.params.barGap?Math.max(n.params.pixelRatio,~~(u/2)):Math.max(n.params.pixelRatio,n.params.barGap*n.params.pixelRatio)),d=c/n.width,v=i,m=r;m<v;m+=f){var y=0,w=Math.floor(m*d)*p,g=Math.floor((m+f)*d)*p;do{var C=Math.abs(h[w]);C>y&&(y=C),w+=p}while(w<g);var x=Math.round(y/e*s);n.params.barMinHeight&&(x=Math.max(x,n.params.barMinHeight)),n.fillRect(m+n.halfPixel,s-x+o,u+n.halfPixel,2*x,n.barRadius,l)}}))},e.prototype.drawWave=function(t,e,r,i){var n=this;return this.prepareDraw(t,e,r,i,(function(t){var e=t.absmax,a=t.hasMinVals,o=(t.height,t.offsetY),s=t.halfH,h=t.peaks,l=t.channelIndex;if(!a){for(var p=[],c=h.length,u=0;u<c;u++)p[2*u]=h[u],p[2*u+1]=-h[u];h=p}void 0!==r&&n.drawLine(h,e,s,o,r,i,l),n.fillRect(0,s+o-n.halfPixel,n.width,n.halfPixel,n.barRadius,l)}))},e.prototype.drawLine=function(t,e,r,i,n,a,o){var s=this,h=this.params.splitChannelsOptions.channelColors[o]||{},l=h.waveColor,p=h.progressColor;this.canvases.forEach((function(o,h){s.setFillStyles(o,l,p),o.drawLines(t,e,r,i,n,a)}))},e.prototype.fillRect=function(t,e,r,i,n,a){for(var o=Math.floor(t/this.maxCanvasWidth),s=Math.min(Math.ceil((t+r)/this.maxCanvasWidth)+1,this.canvases.length),h=o;h<s;h++){var l=this.canvases[h],p=h*this.maxCanvasWidth,c={x1:Math.max(t,h*this.maxCanvasWidth),y1:e,x2:Math.min(t+r,h*this.maxCanvasWidth+l.wave.width),y2:e+i};if(c.x1<c.x2){var u=this.params.splitChannelsOptions.channelColors[a]||{},f=u.waveColor,d=u.progressColor;this.setFillStyles(l,f,d),l.fillRects(c.x1-p,c.y1,c.x2-c.x1,c.y2-c.y1,n)}}},e.prototype.hideChannel=function(t){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(t)},e.prototype.prepareDraw=function(t,e,r,i,n,s,l){var p=this;return void 0===s&&(s=0),h((function(){if(t[0]instanceof Array){var h=t;if(p.params.splitChannels){var c,u=h.filter((function(t,e){return!p.hideChannel(e)}));return p.params.splitChannelsOptions.overlay||p.setHeight(Math.max(u.length,1)*p.params.height*p.params.pixelRatio),p.params.splitChannelsOptions&&p.params.splitChannelsOptions.relativeNormalization&&(c=o(h.map((function(t){return a(t)})))),h.forEach((function(t,e){return p.prepareDraw(t,e,r,i,n,u.indexOf(t),c)}))}t=h[0]}if(!p.hideChannel(e)){var f=1/p.params.barHeight;p.params.normalize&&(f=void 0===l?a(t):l);var d=[].some.call(t,(function(t){return t<0})),v=p.params.height*p.params.pixelRatio,m=v/2,y=v*s||0;return p.params.splitChannelsOptions&&p.params.splitChannelsOptions.overlay&&(y=0),n({absmax:f,hasMinVals:d,height:v,offsetY:y,halfH:m,peaks:t,channelIndex:e})}}))()},e.prototype.setFillStyles=function(t,e,r){void 0===e&&(e=this.params.waveColor),void 0===r&&(r=this.params.progressColor),t.setFillStyles(e,r)},e.prototype.updateProgress=function(t){this.style(this.progressWave,{width:t+"px"})},e}(u);var m=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),y={autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backgroundColor:null,barHeight:1,barRadius:0,barGap:void 0,barMinHeight:void 0,container:null,cursorColor:"#333",cursorWidth:1,drawingContextAttributes:{desynchronized:!1},fillParent:!0,height:128,hideScrollbar:!1,hideCursor:!1,maxCanvasWidth:4e3,minPxPerSec:20,normalize:!1,pixelRatio:window.devicePixelRatio,plugins:[],progressColor:"#555",responsive:!1,scrollParent:!1,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},waveColor:"#999"};const w=function(t){function r(r){var i=t.call(this)||this;if(i.currentTime=0,i.duration=0,i.peaks=[],i.initialisedPluginList={},i.isReady=!1,i.isDestroyed=!1,i.params=Object.assign({},y,r),i.params.splitChannelsOptions=Object.assign({},y.splitChannelsOptions,r.splitChannelsOptions),i.container="string"==typeof i.params.container?document.querySelector(i.params.container):i.params.container,!i.container)throw new Error("Container element not found");if(i.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(i.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");i.params.backgroundColor&&i.setBackgroundColor(i.params.backgroundColor),i.drawer=null,i.initialisedPluginList={},i.isReady=!1,i.isDestroyed=!1;var n=0;return i._onResize=e()((function(){i.drawer.wrapper&&n!==i.drawer.wrapper.clientWidth&&!i.params.scrollParent&&(n=i.drawer.wrapper.clientWidth)&&i.drawer.fireEvent("redraw")}),"number"==typeof i.params.responsive?i.params.responsive:100),i}return m(r,t),r.create=function(t){return new r(t).init()},r.prototype.init=function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this},r.prototype.registerPlugins=function(t){var e=this;return t.forEach((function(t){return e.addPlugin(t)})),t.forEach((function(t){t.deferInit||e.initPlugin(t.name)})),this.fireEvent("plugins-registered",t),this},r.prototype.getActivePlugins=function(){return this.initialisedPluginList},r.prototype.addPlugin=function(t){var e=this;if(!t.name)throw new Error("Plugin does not have a name!");if(!t.instance)throw new Error("Plugin ".concat(t.name," does not have an instance property!"));t.staticProps&&Object.keys(t.staticProps).forEach((function(r){e[r]=t.staticProps[r]}));var r=t.instance;return this[t.name]=new r(t.params||{},this),this.fireEvent("plugin-added",t.name),this},r.prototype.initPlugin=function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet!"));return this.initialisedPluginList[t]&&this.destroyPlugin(t),this[t].init(),this.initialisedPluginList[t]=!0,this.fireEvent("plugin-initialised",t),this},r.prototype.destroyPlugin=function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[t])throw new Error("Plugin ".concat(t," is not active and cannot be destroyed!"));if("function"!=typeof this[t].destroy)throw new Error("Plugin ".concat(t," does not have a destroy function!"));return this[t].destroy(),delete this.initialisedPluginList[t],this.fireEvent("plugin-destroyed",t),this},r.prototype.destroyAllPlugins=function(){var t=this;Object.keys(this.initialisedPluginList).forEach((function(e){return t.destroyPlugin(e)}))},r.prototype.createDrawer=function(){var t=this;this.drawer=new v(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){t.drawBuffer(),t.drawer.progress(t.getPlayedPercents())}))},r.prototype.getPlayedPercents=function(){return this.currentTime/this.duration},r.prototype.getDuration=function(){return this.duration},r.prototype.getCurrentTime=function(){return this.currentTime},r.prototype.setCurrentTime=function(t){this.currentTime=t,this.drawer.progress(this.currentTime/this.duration)},r.prototype.toggleScroll=function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},r.prototype.getWaveColor=function(t){return t&&this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor:this.params.waveColor},r.prototype.setWaveColor=function(t,e){e&&this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor=t:this.params.waveColor=t,this.drawBuffer()},r.prototype.getProgressColor=function(t){return t&&this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor:this.params.progressColor},r.prototype.setProgressColor=function(t,e){e&&this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor=t:this.params.progressColor=t,this.drawBuffer()},r.prototype.getBackgroundColor=function(){return this.params.backgroundColor},r.prototype.setBackgroundColor=function(t){this.params.backgroundColor=t,s(this.container,{background:this.params.backgroundColor})},r.prototype.getCursorColor=function(){return this.params.cursorColor},r.prototype.setCursorColor=function(t){this.params.cursorColor=t,this.drawer.updateCursor()},r.prototype.getHeight=function(){return this.params.height},r.prototype.setHeight=function(t){this.params.height=t,this.drawer.setHeight(t*this.params.pixelRatio),this.drawBuffer()},r.prototype.setFilteredChannels=function(t){this.params.splitChannelsOptions.filterChannels=t,this.drawBuffer()},r.prototype.drawBuffer=function(){var t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),e=this.drawer.getWidth(),r=t,i=0,n=Math.max(i+e,r);this.params.fillParent&&(!this.params.scrollParent||t<e)&&(i=0,n=r=e),this.drawer.drawPeaks(this.peaks,r,i,n),this.fireEvent("redraw",this.peaks,r)},r.prototype.zoom=function(t){t?(this.params.minPxPerSec=t,this.params.scrollParent=!0):(this.params.minPxPerSec=y.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)},r.prototype.load=function(t,e){this.empty(),this.loadBuffer(t,e)},r.prototype.loadBuffer=function(t,e){t&&(this.peaks=t,this.duration=e,this.isReady=!0,this.drawBuffer(),this.fireEvent("waveform-ready"),this.fireEvent("ready"))},r.prototype.empty=function(){this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks([],0,0,NaN)},r.prototype.destroy=function(){this.fireEvent("destroy"),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.drawer&&this.drawer.destroy(),this.isReady=!1,this.isDestroyed=!0},r}(n);var g=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();const C=function(t){function r(r,i){var n=t.call(this)||this;if(n._onScroll=function(){n.wrapper&&n.drawer.wrapper&&(n.wrapper.scrollLeft=n.drawer.wrapper.scrollLeft)},n._onRedraw=function(){return n.render()},n._onReady=function(){var t=n.wavesurfer;n.drawer=t.drawer,n.pixelRatio=t.drawer.params.pixelRatio,n.maxCanvasWidth=t.drawer.maxCanvasWidth||t.drawer.width,n.maxCanvasElementWidth=t.drawer.maxCanvasElementWidth||Math.round(n.maxCanvasWidth/n.pixelRatio),t.drawer.wrapper.addEventListener("scroll",n._onScroll),t.on("redraw",n._onRedraw),t.on("zoom",n._onZoom),n.render()},n._onWrapperClick=function(t){t.preventDefault();var e="offsetX"in t?t.offsetX:t.layerX;n.fireEvent("click",e/n.wrapper.scrollWidth||0)},n.container="string"==typeof r.container?document.querySelector(r.container):r.container,!n.container)throw new Error("No container for wavesurfer timeline");return n.wavesurfer=i,n.params=Object.assign({},{height:20,notchPercentHeight:90,labelPadding:5,unlabeledNotchColor:"#c0c0c0",primaryColor:"#000",secondaryColor:"#c0c0c0",primaryFontColor:"#000",secondaryFontColor:"#000",fontFamily:"Arial",fontSize:10,duration:null,zoomDebounce:!1,formatTimeCallback:n.defaultFormatTimeCallback,timeInterval:n.defaultTimeInterval,primaryLabelInterval:n.defaultPrimaryLabelInterval,secondaryLabelInterval:n.defaultSecondaryLabelInterval,offset:0},r),n.canvases=[],n.wrapper=null,n.drawer=null,n.pixelRatio=null,n.maxCanvasWidth=null,n.maxCanvasElementWidth=null,n._onZoom=n.params.zoomDebounce?e()((function(){return n.render()}),n.params.zoomDebounce):function(){return n.render()},n}return g(r,t),r.create=function(t){return{name:"timeline",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,instance:r}},r.prototype.init=function(){this.wavesurfer.isReady?this._onReady():this.wavesurfer.once("ready",this._onReady)},r.prototype.destroy=function(){this.unAll(),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.un("zoom",this._onZoom),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.drawer.wrapper.removeEventListener("scroll",this._onScroll),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.removeEventListener("click",this._onWrapperClick),this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)},r.prototype.createWrapper=function(){var t=this.wavesurfer.params;this.container.innerHTML="",this.wrapper=this.container.appendChild(document.createElement("timeline")),s(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:"".concat(this.params.height,"px")}),(t.fillParent||t.scrollParent)&&s(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.wrapper.addEventListener("click",this._onWrapperClick)},r.prototype.render=function(){this.wrapper||this.createWrapper(),this.updateCanvases(),this.updateCanvasesPositioning(),this.renderCanvases()},r.prototype.addCanvas=function(){var t=this.wrapper.appendChild(document.createElement("canvas"));this.canvases.push(t),s(t,{position:"absolute",zIndex:4})},r.prototype.removeCanvas=function(){var t=this.canvases.pop();t&&t.parentElement.removeChild(t)},r.prototype.updateCanvases=function(){for(var t=Math.round(this.drawer.wrapper.scrollWidth),e=Math.ceil(t/this.maxCanvasElementWidth);this.canvases.length<e;)this.addCanvas();for(;this.canvases.length>e;)this.removeCanvas()},r.prototype.updateCanvasesPositioning=function(){var t=this,e=this.canvases.length;this.canvases.forEach((function(r,i){var n=i===e-1?t.drawer.wrapper.scrollWidth-t.maxCanvasElementWidth*(e-1):t.maxCanvasElementWidth;r.width=n*t.pixelRatio,r.height=(t.params.height+1)*t.pixelRatio,s(r,{width:"".concat(n,"px"),height:"".concat(t.params.height,"px"),left:"".concat(i*t.maxCanvasElementWidth,"px")})}))},r.prototype.renderCanvases=function(){var t=this,e=this.params.duration||this.wavesurfer.getDuration();if(!(e<=0)){var r,i=this.wavesurfer.params,n=this.params.fontSize*i.pixelRatio,a=parseInt(e.toString(),10)+1,o=i.fillParent&&!i.scrollParent?this.drawer.getWidth():this.drawer.wrapper.scrollWidth*i.pixelRatio,s=this.params.height*this.pixelRatio,h=this.params.height*(this.params.notchPercentHeight/100)*this.pixelRatio,l=o/e,p=this.params.formatTimeCallback,c=function(t){return"function"==typeof t?t(l):t},u=c(this.params.timeInterval),f=c(this.params.primaryLabelInterval),d=c(this.params.secondaryLabelInterval),v=l*this.params.offset,m=0,y=[],w=this.params.offset<0?a-this.params.offset:a;for(r=0;r<w/u;r++)y.push([r,m,v]),m+=u,v+=l*u;var g=function(t){y.forEach((function(e){t(e[0],e[1],e[2])}))};this.setFillStyles(this.params.primaryColor),this.setFonts("".concat(n,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.primaryFontColor),g((function(e,r,i){e%f==0&&(t.fillRect(i,0,1,s),t.fillText(p(r,l),i+t.params.labelPadding*t.pixelRatio,s))})),this.setFillStyles(this.params.secondaryColor),this.setFonts("".concat(n,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.secondaryFontColor),g((function(e,r,i){e%d==0&&(t.fillRect(i,0,1,s),t.fillText(p(r,l),i+t.params.labelPadding*t.pixelRatio,s))})),this.setFillStyles(this.params.unlabeledNotchColor),g((function(e,r,i){e%d!=0&&e%f!=0&&t.fillRect(i,0,1,h)}))}},r.prototype.setFillStyles=function(t){this.canvases.forEach((function(e){var r=e.getContext("2d");r&&(r.fillStyle=t)}))},r.prototype.setFonts=function(t){this.canvases.forEach((function(e){var r=e.getContext("2d");r&&(r.font=t)}))},r.prototype.fillRect=function(t,e,r,i){var n=this;this.canvases.forEach((function(a,o){var s=o*n.maxCanvasWidth,h={x1:Math.max(t,o*n.maxCanvasWidth),y1:e,x2:Math.min(t+r,o*n.maxCanvasWidth+a.width),y2:e+i};if(h.x1<h.x2){var l=a.getContext("2d");l&&l.fillRect(h.x1-s,h.y1,h.x2-h.x1,h.y2-h.y1)}}))},r.prototype.fillText=function(t,e,r){var i=0,n=0;this.canvases.forEach((function(a){var o=a.getContext("2d");if(o){var s=o.canvas.width;if(n>e+i)return;n+s>e&&o&&(i=o.measureText(t).width,o.fillText(t,e-n,r)),n+=s}}))},r.prototype.defaultFormatTimeCallback=function(t,e){if(t/60>1){var r=parseInt((t/60).toString(),10);return t=(t=parseInt((t%60).toString(),10))<10?"0"+t:t,"".concat(r,":").concat(t)}return Math.round(1e3*t)/1e3},r.prototype.defaultTimeInterval=function(t){return t>=25?1:5*t>=25?5:15*t>=25?15:60*Math.ceil(.5/t)},r.prototype.defaultPrimaryLabelInterval=function(t){return t>=25?10:5*t>=25?6:4},r.prototype.defaultSecondaryLabelInterval=function(t){return t>=25?5:2},r}(n)})(),i})()));